<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>PHP学习笔记</title>
    <url>/2022/10/02/PHPNotes/</url>
    <content><![CDATA[<h1 id="PHP学习笔记（暂时先不更了…）"><a href="#PHP学习笔记（暂时先不更了…）" class="headerlink" title="PHP学习笔记（暂时先不更了…）"></a>PHP学习笔记（暂时先不更了…）</h1><h2 id="PHP-Basic-Rules"><a href="#PHP-Basic-Rules" class="headerlink" title="PHP Basic Rules"></a>PHP Basic Rules</h2><p>PHP文件默认的文件拓展名<code>.php</code></p>
<h4 id="The-first-PHP-examle"><a href="#The-first-PHP-examle" class="headerlink" title="The first PHP examle"></a>The first PHP examle</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;My first PHP page&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">echo &quot;Hello World!&quot;;</span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The function is to print “Hello World!” to Browser.<strong>Each line ends with <code>;</code></strong></p>
</blockquote>
<h4 id="annotate-注释"><a href="#annotate-注释" class="headerlink" title="annotate(注释)"></a>annotate(注释)</h4><p>Like C, PHP have  two ways to annotate.</p>
<ul>
<li>单行注释，use <code>//</code> or <code>#</code></li>
<li>多行注释，use <code>/*   */</code></li>
</ul>
<h4 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h4><ul>
<li>in PHP, <strong>variable must begin with <code>$</code></strong></li>
<li>Variable names are <strong>case-sensitive</strong>(<code>$a</code> and <code>$A</code> are <strong>different</strong> variables)</li>
<li>Other rules of name are the same as C language</li>
</ul>
<span id="more"></span>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$text</span>=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="variable">$a</span>=<span class="number">1</span>;</span><br><span class="line"><span class="variable">$b</span>=<span class="number">2.5</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>We notice that PHP is <strong>Implicit type conversion</strong>(<u>弱类型定义语言</u>)</p>
<p>PHP 有四种不同的变量作用域：</p>
<ul>
<li>local</li>
<li>global</li>
<li>static</li>
<li>parameter</li>
</ul>
<p>If we want to visit global variables in function, we must use <strong><code>global</code></strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span> = <span class="number">1</span>;</span><br><span class="line"><span class="variable">$y</span> = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sumOfTwo</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$x</span>, <span class="variable">$y</span>;</span><br><span class="line">    <span class="variable">$x</span> = <span class="variable">$x</span> + <span class="variable">$y</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">sumOfTwo</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$x</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>PHP stores all global variable in an array named $GLOBALS[index], <code>index</code> is the name of variable. It can be visited in function.</p>
</blockquote>
<p>When a function completes,  it’s all variables will be delete. However, sometimes you hope the variable can be saved. To do it, you can use <strong><code>static</code></strong> when declaring the variable.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="built_in">static</span> <span class="variable">$x</span>=<span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<p><u>$x is still a local variable!</u></p>
<h4 id="Echo"><a href="#Echo" class="headerlink" title="Echo"></a>Echo</h4><ol>
<li><p>multiple parameter</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Hello world!&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;This is &quot;</span>, <span class="string">&quot;a string,&quot;</span>, <span class="string">&quot;which use &quot;</span>, <span class="string">&quot;multiple &quot;</span>, <span class="string">&quot;parameter.&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>With variables</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;在 <span class="subst">$txt2</span> 学习 PHP &quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;我车的品牌是 <span class="subst">&#123;$cars[0]&#125;</span>&quot;</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>Difference between <code>echo</code> and <code>print</code></strong></p>
<ul>
<li>echo - 可以输出<strong>一个或多个</strong>字符串</li>
<li>print - 只允许输出<strong>一个</strong>字符串，<strong>返回值总为 1</strong></li>
<li>其他方面相似，都可以输出<strong>with variables</strong></li>
</ul>
<p><strong>Tips：</strong><code>echo</code> is faster than <code>print</code>， <code>echo</code> have no return value ，<code>print</code> return 1。</p>
<h4 id="Data-Type"><a href="#Data-Type" class="headerlink" title="Data Type"></a>Data Type</h4><ul>
<li>String  -&gt; We can put <strong>any word in <code>&#39;&#39;</code> or <code>&quot;&quot;</code></strong></li>
<li>Integer -&gt; 十六进制（ 以 0x 为前缀）或八进制（前缀为 0）</li>
<li>Float</li>
<li>Boolean(<code>true</code>,  <code>false</code>)</li>
<li>Array</li>
<li>Object（对象）</li>
<li>NULL（空值）</li>
<li>Resource（资源类型）</li>
</ul>
<h5 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h5><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$cars</span>=<span class="keyword">array</span>(<span class="string">&quot;Aito&quot;</span>,<span class="string">&quot;BMW&quot;</span>);  </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h5><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="variable">$color</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$color</span>=<span class="string">&quot;green&quot;</span></span>)</span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;color = <span class="variable">$color</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">what_color</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;color;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h5><p>resource is a special variable, which stores a refrence to outer resource</p>
<p>(link to database、open the file…)</p>
<h4 id="Comparison-of-data"><a href="#Comparison-of-data" class="headerlink" title="Comparison of data"></a>Comparison of data</h4><ul>
<li>Loose comparison：use<code>==</code>, only compare the <u><strong>value</strong></u> of variables</li>
<li>Strict comparison：use<code>===</code>，not only <strong><u>value</u></strong>,but also <u><strong>type</strong></u>。</li>
</ul>
<p><strong><u>字符串在进行比较时，会转化成数字进行数学比较！</u></strong></p>
<h4 id="Const"><a href="#Const" class="headerlink" title="Const"></a>Const</h4><p>use<code>define()</code> ：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> <span class="title function_ invoke__">define</span> ( <span class="keyword">string</span> <span class="variable">$name</span> , <span class="keyword">mixed</span> <span class="variable">$value</span> [, <span class="keyword">bool</span> <span class="variable">$case_insensitive</span> = <span class="literal">false</span> ] )</span><br></pre></td></tr></table></figure>
<p>three parameter:</p>
<ul>
<li>name</li>
<li>value</li>
<li><strong>case_insensitive</strong> ：optional. If  <strong>case_insensitive</strong> is TRUE，The constant is not case sensitive. <u>The default is case-sensitive</u>.</li>
</ul>
<p>Example:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">define</span>(<span class="string">&quot;BAIDU&quot;</span>, <span class="string">&quot;www.baidu.com&quot;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="String"><a href="#String" class="headerlink" title="String"></a>String</h4><p><strong>并置运算符<code>.</code></strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$txt1</span>=<span class="string">&quot;Hello world!&quot;</span>;</span><br><span class="line"><span class="variable">$txt2</span>=<span class="string">&quot;What a nice day!&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$txt1</span> . <span class="string">&quot; &quot;</span> . <span class="variable">$txt2</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>.</code> in PHP is similar to <code>+</code> in C++(string)</p>
</blockquote>
<p><strong>Other string functions:</strong></p>
<ol>
<li><code>strlen()</code>, return the length of string</li>
<li><code>strpos($s1, $s2)</code>, return the <code>$s2</code> ‘s position in <code>$s1</code></li>
</ol>
<p>(String subscripts start at 0)</p>
<h2 id="Structured-programming"><a href="#Structured-programming" class="headerlink" title="Structured programming"></a>Structured programming</h2><h4 id="operator"><a href="#operator" class="headerlink" title="operator"></a>operator</h4><ul>
<li><code>+</code>,<code>-</code>,<code>*</code>,<code>/</code>,<code>%</code>,<code>~</code> is like C</li>
<li><p>intdiv(10, 3) === 3</p>
</li>
<li><p>we can use <code>x += y</code> , <code>x++</code></p>
</li>
<li>both <code>!=</code> and <code>&lt;&gt;</code> is legal</li>
<li><code>x!==y</code> means <u>如果 x 不等于 y，或它们类型不相同，则返回 true</u></li>
<li>both <code>and</code> and <code>&amp;&amp;</code> is legal(优先级不同)</li>
<li><code>&lt;&lt;</code>,<code>&gt;&gt;</code></li>
</ul>
<h4 id="If-else-switch"><a href="#If-else-switch" class="headerlink" title="If-else, switch"></a>If-else, switch</h4><p>In php, <code>if-else</code> and <code>switch</code> are the same as that in C/C++.</p>
<p>The only difference is php provide <code>elseif</code>.</p>
<p>Example:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$t</span>=<span class="title function_ invoke__">date</span>(<span class="string">&quot;H&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$t</span>&lt;<span class="string">&quot;10&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Have a good morning!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">elseif</span> (<span class="variable">$t</span>&lt;<span class="string">&quot;20&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Have a good day!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Have a good night!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="For、While"><a href="#For、While" class="headerlink" title="For、While"></a>For、While</h4><h5 id="For"><a href="#For" class="headerlink" title="For"></a>For</h5><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="number">10</span>; <span class="variable">$i</span>++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;数字为 &quot;</span> . <span class="variable">$i</span> . PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="For-each"><a href="#For-each" class="headerlink" title="For each"></a>For each</h5><p><strong>Format 1:<code>foreach ($array as $value)&#123;&#125;</code></strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span> = <span class="keyword">array</span>(<span class="string">&quot;Google&quot;</span>,<span class="string">&quot;Baidu&quot;</span>,<span class="string">&quot;Bing&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$x</span> <span class="keyword">as</span> <span class="variable">$value</span>)  <span class="comment">// x is the name of array</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$value</span> . PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Format 2:<code>foreach ($array as $key =&gt; $value)&#123;&#125;</code></strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span> = <span class="keyword">array</span>(<span class="number">1</span>=&gt;<span class="string">&quot;Google&quot;</span>, <span class="number">2</span>=&gt;<span class="string">&quot;Baidu&quot;</span>, <span class="number">3</span>=&gt;<span class="string">&quot;Bing&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$x</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$value</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;key  为 &quot;</span> . <span class="variable">$key</span> . <span class="string">&quot;，对应的 value 为 &quot;</span>. <span class="variable">$value</span> . PHP_EOL;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="While-Do-While"><a href="#While-Do-While" class="headerlink" title="While/Do While"></a>While/Do While</h5><p>In php, <code>while</code> and <code>do while</code> are the same as that in C/C++.</p>
<p><strong>Format:<code>while(condition)&#123;// some codes&#125;</code></strong></p>
<h4 id="Array-1"><a href="#Array-1" class="headerlink" title="Array"></a>Array</h4><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$s</span> = <span class="keyword">array</span>(<span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;bbb&quot;</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">count</span>(<span class="variable">$s</span>); <span class="comment">// count() return the length of array</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>Key-value</strong>:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$age</span> = <span class="keyword">array</span>(<span class="string">&quot;Mike&quot;</span> =&gt; <span class="string">&quot;35&quot;</span>, <span class="string">&quot;Amy&quot;</span>=&gt;<span class="string">&quot;37&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Mike is &quot;</span>. <span class="variable">$age</span>[<span class="string">&#x27;Mike&#x27;</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h4><p>example:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$s</span> = <span class="keyword">array</span>(<span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;bbb&quot;</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">sort</span>(<span class="variable">$s</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li><code>sort()</code>:对数组升序排列</li>
<li><code>rsort()</code>: 对数组降序排列</li>
<li><code>ksort()</code> : 根据关联数组的键，对数组升序排列</li>
<li><code>asort()</code> :根据关联数组的值，对数组升序排列</li>
<li><code>krsort()</code>:根据关联数组的键，对数组降序排列</li>
<li><code>arsort()</code> :根据关联数组的值，对数组降序排列</li>
</ul>
<h4 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h4><p><strong>Format</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionName</span>(<span class="params"><span class="variable">$a</span>, <span class="variable">$b</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$total</span> = <span class="variable">$a</span> + <span class="variable">$b</span></span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$total</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p>php function uses <code>return</code> to return value</p>
]]></content>
      <tags>
        <tag>编程语言</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML+CSSNotes</title>
    <url>/2022/10/17/HtmlandCss/</url>
    <content><![CDATA[<h1 id="HTML-CSS-Notes"><a href="#HTML-CSS-Notes" class="headerlink" title="HTML+CSS Notes"></a>HTML+CSS Notes</h1><h2 id="HTML基础"><a href="#HTML基础" class="headerlink" title="HTML基础"></a>HTML基础</h2><h3 id="Web标准"><a href="#Web标准" class="headerlink" title="Web标准"></a>Web标准</h3><div class="table-container">
<table>
<thead>
<tr>
<th>构成</th>
<th>语言</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>结构</td>
<td>HTML</td>
<td><strong>页面元素</strong>和内容</td>
</tr>
<tr>
<td>表现</td>
<td>CSS</td>
<td>页面元素的外观和位置等<strong>页面样式</strong>（如：颜色、大小等）</td>
</tr>
<tr>
<td>行为</td>
<td>JavaScript</td>
<td>网页模型的定义和<strong>页面交互</strong></td>
</tr>
</tbody>
</table>
</div>
<h3 id="HTML骨架"><a href="#HTML骨架" class="headerlink" title="HTML骨架"></a>HTML骨架</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>网页标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p> 在VScode中，<u>输入<code>!</code>并按键盘上的<strong>Tab</strong>键</u>可快速生成Html的骨架代码。</p>
</blockquote>
<hr>
<h3 id="HTML基本语法"><a href="#HTML基本语法" class="headerlink" title="HTML基本语法"></a>HTML基本语法</h3><h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><ul>
<li><p>浏览器执行代码时会忽略所有的注释</p>
</li>
<li><p>Vscode中快捷键：<code>Ctrl + /</code></p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这是一段注释 --&gt;</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h4 id="Html-标签的结构"><a href="#Html-标签的结构" class="headerlink" title="Html 标签的结构"></a>Html 标签的结构</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>加粗文字<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>&lt;strong&gt;</code>是开始标签，<code>&lt;/strong&gt;</code>是结束标签</p>
</li>
<li><p>少数标签不需要成对出现，称为单标签</p>
</li>
</ul>
<h4 id="标题标签"><a href="#标题标签" class="headerlink" title="标题标签"></a>标题标签</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>1级标签<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>2级标签<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>3级标签<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span>&gt;</span>4级标签<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>5级标签<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>6级标签<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>只有1~6级标签，重要程度依次递减</li>
</ul>
<h4 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    这里是段落1</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    这里是段落2</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h4><p>代码：<code>&lt;br&gt;</code></p>
<p>可以直接加在段落文字中</p>
<h4 id="水平分割线"><a href="#水平分割线" class="headerlink" title="水平分割线"></a>水平分割线</h4><p>代码：<code>&lt;hr&gt;</code></p>
<h4 id="文本格式化标签"><a href="#文本格式化标签" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h4><div class="table-container">
<table>
<thead>
<tr>
<th>标签</th>
<th>标签(突出重要性的强调语境)</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>b</td>
<td>strong</td>
<td>加粗</td>
</tr>
<tr>
<td>u</td>
<td>ins</td>
<td>下划线</td>
</tr>
<tr>
<td>i</td>
<td>em</td>
<td>倾斜</td>
</tr>
<tr>
<td>s</td>
<td>del</td>
<td>删除线</td>
</tr>
</tbody>
</table>
</div>
<h4 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h4><p>代码：<code>&lt;img src=&quot;&quot; alt=&quot;&quot;&gt;</code></p>
<blockquote>
<p> <strong>属性注意点：</strong></p>
<ol>
<li>标签属性写在开始标签内部</li>
<li>属性之间用<strong>空格</strong>隔开，属性之间没有顺序之分</li>
</ol>
</blockquote>
<p><strong>alt属性</strong></p>
<p>替换文本，当图片无法正常显示时显示alt属性中的内容</p>
<p><strong>title属性</strong></p>
<p>鼠标悬停时显示的文本</p>
<p><strong>width和height属性</strong></p>
<p>宽度和高度（数字）</p>
<ul>
<li>如果只设置width或height中的一个，另一个属性会自动等比例缩放</li>
<li>如果同时设置了width和height两个，图片可能会变形</li>
</ul>
<h4 id="音频"><a href="#音频" class="headerlink" title="音频"></a>音频</h4><p>代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;./music.mp3&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>常见属性</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性名</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td>音频路径</td>
</tr>
<tr>
<td>controls</td>
<td>显示播放的控件</td>
</tr>
<tr>
<td>autoplay</td>
<td>自动播放</td>
</tr>
<tr>
<td>loop</td>
<td>循环播放</td>
</tr>
</tbody>
</table>
</div>
<p>目前支持三种格式：mp3、wav、ogg</p>
<h4 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h4><p>代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;./video.mp4&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>常见属性</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性名</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td>音频路径</td>
</tr>
<tr>
<td>controls</td>
<td>显示播放的控件</td>
</tr>
<tr>
<td>autoplay</td>
<td>自动播放</td>
</tr>
<tr>
<td>loop</td>
<td>循环播放</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>谷歌浏览器可以让视频自动播放，但必须是静音状态muted</p>
</blockquote>
<p>目前支持三种格式：mp4、WebM、ogg</p>
<h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;./目标网页.html&quot;</span>&gt;</span>这是一个超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>当网站开发初期不知道跳转地址的时候，href的值书写<code>&quot;#&quot;</code>(空连接)</li>
</ul>
<p>属性名：target</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>取值</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_self</code></td>
<td>默认值，在当前窗口跳转</td>
</tr>
<tr>
<td><code>_blank</code></td>
<td>在新窗口跳转</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;./目标网页.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>这是一个超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="HTML进阶"><a href="#HTML进阶" class="headerlink" title="HTML进阶"></a>HTML进阶</h3><h4 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h4><p>用于内容比较规整的区域</p>
<h5 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h5><p>标签组成：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ul</td>
<td>表示无序列表的的整体，用于包裹li标签</td>
</tr>
<tr>
<td>li</td>
<td>表示无序列表的每一项，用于包含每一行的内容</td>
</tr>
</tbody>
</table>
</div>
<p><strong>注意</strong>：ul标签中只允许包含li标签，li标签中可以包含任意内容</p>
<h5 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h5><p>标签组成：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ol</td>
<td>表示有序列表的的整体，用于包裹li标签</td>
</tr>
<tr>
<td>li</td>
<td>表示有序列表的每一项，用于包含每一行的内容</td>
</tr>
</tbody>
</table>
</div>
<p><strong>注意</strong>：ol标签中只允许包含li标签，li标签中可以包含任意内容</p>
<h5 id="自定义列表"><a href="#自定义列表" class="headerlink" title="自定义列表"></a>自定义列表</h5><p>常用在网页底部的导航中</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>dl</td>
<td>表示自定义列表的的整体，用于包裹dt/dd标签</td>
</tr>
<tr>
<td>dt</td>
<td>表示自定义列表的主题</td>
</tr>
<tr>
<td>dd</td>
<td>表示自定义列表的针对主题的每一项内容</td>
</tr>
</tbody>
</table>
</div>
<p><strong>注意</strong>：dl标签中只允许包含dt/dd标签，dt/dd标签中可以包含任意内容</p>
<blockquote>
<p>在CSS中，<code>list-style: none;</code>可去除li前面的小圆点</p>
</blockquote>
<h4 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h4><h5 id="建立表格"><a href="#建立表格" class="headerlink" title="建立表格"></a>建立表格</h5><div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>table</td>
<td>表格整体，可用于包裹多个tr</td>
</tr>
<tr>
<td>tr</td>
<td>表格每行，可用于包裹多个td</td>
</tr>
<tr>
<td>td</td>
<td>表格单元格</td>
</tr>
</tbody>
</table>
</div>
<p>参考代码:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Header 1<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Header 2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--这是表头单元格--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>row 1, cell 1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>row 1, cell 2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>row 2, cell 1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>row 2, cell 2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>常用属性：<code>border</code>、<code>width</code>、<code>height</code></p>
<blockquote>
<p><code>width</code>、<code>height</code>等属性一般在css文件中设置</p>
</blockquote>
<h5 id="表格标题-amp-表头单元格"><a href="#表格标题-amp-表头单元格" class="headerlink" title="表格标题&amp;表头单元格"></a>表格标题&amp;表头单元格</h5><div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>caption</td>
<td>表格大标题</td>
<td>表示表格整体大标题，默认在表格整体顶部居中位置显示</td>
</tr>
<tr>
<td>th</td>
<td>表头单元格</td>
<td>表示一列小标题，通常用于表格第一行，默认内部文字加粗并居中显示</td>
</tr>
</tbody>
</table>
</div>
<h5 id="表格结构标签"><a href="#表格结构标签" class="headerlink" title="表格结构标签"></a>表格结构标签</h5><div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>thead</td>
<td>表格头部</td>
</tr>
<tr>
<td>tbody</td>
<td>表格主体</td>
</tr>
<tr>
<td>tfoot</td>
<td>表格底部</td>
</tr>
</tbody>
</table>
</div>
<h5 id="合并单元格"><a href="#合并单元格" class="headerlink" title="合并单元格"></a>合并单元格</h5><p>保留数据原则：<strong>左上原则</strong></p>
<p>给保留的单元格td设置属性：跨行合并(rowspan)或跨列合并(colspan)，参数是合并的行数/列数</p>
<h4 id="表单（重要）"><a href="#表单（重要）" class="headerlink" title="表单（重要）"></a>表单（重要）</h4><h5 id="input系列-单标签"><a href="#input系列-单标签" class="headerlink" title="input系列(单标签)"></a>input系列(单标签)</h5><p>input标签通过<strong>设置不同的<code>type</code>值展示不同的效果</strong></p>
<p><strong>type属性值</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>type属性值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>input</td>
<td>text</td>
<td>文本框，用于输入单行文本</td>
</tr>
<tr>
<td>input</td>
<td>password</td>
<td>密码框，用于输入密码</td>
</tr>
<tr>
<td>input</td>
<td>radio</td>
<td>单选框，用于多选一</td>
</tr>
<tr>
<td>input</td>
<td>checkbox</td>
<td>多选框，用于多选多</td>
</tr>
<tr>
<td>input</td>
<td>file</td>
<td>文件选择，用于之后上传文件</td>
</tr>
<tr>
<td>input</td>
<td>submit</td>
<td>提交按钮，用于提交</td>
</tr>
<tr>
<td>input</td>
<td>reset</td>
<td>重置按钮，用于重置</td>
</tr>
<tr>
<td>input</td>
<td>button</td>
<td>普通按钮，默认无功能，之后配合js添加功能</td>
</tr>
</tbody>
</table>
</div>
<p><strong>input占位符</strong></p>
<p>type属性：text</p>
<p>常用属性：</p>
<ul>
<li>placeholder占位符。提示用户输入内容的文本</li>
</ul>
<p><strong>单选功能和默认选中</strong></p>
<p>type属性：radio</p>
<p>常用属性：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>分组。<strong>*有相同name属性值的单选框为一组，一组中只能被选中一个</strong></td>
</tr>
<tr>
<td>checked</td>
<td>默认选中</td>
</tr>
</tbody>
</table>
</div>
<p>参考代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">性别<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">checked</span>&gt;</span>男 <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span>女</span><br></pre></td></tr></table></figure>
<p><strong>多文件上传</strong></p>
<p>type属性：file</p>
<p>常用属性</p>
<ul>
<li>mutiple：实现多文件选择</li>
</ul>
<p><strong>input按钮</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>type属性值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>input</td>
<td>submit</td>
<td>提交按钮。点击之后提交数据给后端服务器</td>
</tr>
<tr>
<td>input</td>
<td>reset</td>
<td>重置按钮。点击之后恢复表单默认值</td>
</tr>
<tr>
<td>input</td>
<td>button</td>
<td>普通按钮。默认无功能，之后配合js添加功能</td>
</tr>
</tbody>
</table>
</div>
<p><u><strong>*要实现提交和重置功能，需要一个表单域标签<code>&lt;form action=&quot;&quot;&gt;&lt;/form&gt;</code></strong></u></p>
<p><code>action</code>参数表示提交地址</p>
<p>按钮显示文字：使用<code>value</code>参数</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;普通按钮&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="button按钮标签（双标签）"><a href="#button按钮标签（双标签）" class="headerlink" title="button按钮标签（双标签）"></a>button按钮标签（双标签）</h5><p>type属性值</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>type属性值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>button</td>
<td>submit</td>
<td>提交按钮。点击之后提交数据给后端服务器</td>
</tr>
<tr>
<td>button</td>
<td>reset</td>
<td>重置按钮，点击之后恢复表单默认值</td>
</tr>
<tr>
<td>button</td>
<td>button</td>
<td>普通按钮。默认无功能，之后配合js添加功能</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>button按钮是双标签，更便于包裹其他文字图片内容</li>
</ul>
<h5 id="select下拉菜单"><a href="#select下拉菜单" class="headerlink" title="select下拉菜单"></a>select下拉菜单</h5><p>标签组成：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>select</td>
<td>下拉菜单的整体</td>
</tr>
<tr>
<td>option</td>
<td>下拉菜单的每一项</td>
</tr>
</tbody>
</table>
</div>
<p>常见属性</p>
<ul>
<li>selected：下拉菜单的默认选中</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="textarea文本域"><a href="#textarea文本域" class="headerlink" title="textarea文本域"></a>textarea文本域</h5><p>标签名：textarea</p>
<p>常见属性：</p>
<ul>
<li>cols：规定文本域可见宽度</li>
<li>rows：规定了文本域内可见行数</li>
</ul>
<h5 id="Label标签"><a href="#Label标签" class="headerlink" title="Label标签"></a>Label标签</h5><p>常用于绑定内容与表单标签的关系</p>
<p>两种使用方法：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">性别：</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">id</span>=<span class="string">&quot;nan&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;nan&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span>女<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="语义标签"><a href="#语义标签" class="headerlink" title="语义标签"></a>语义标签</h4><h5 id="没有语义的布局标签div、span"><a href="#没有语义的布局标签div、span" class="headerlink" title="没有语义的布局标签div、span"></a>没有语义的布局标签div、span</h5><ul>
<li><p>div标签：一行只显示一个，独占一行</p>
</li>
<li><p>span标签：一行可显示多个</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div标签1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div标签2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 两个标签会分行显示 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>span标签1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>span标签2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 两个标签会在同一行显示 --&gt;</span></span><br></pre></td></tr></table></figure>
<p>这两个标签使用频率非常高</p>
<h5 id="有语义的标签布局"><a href="#有语义的标签布局" class="headerlink" title="有语义的标签布局"></a>有语义的标签布局</h5><p>HTML5新版本</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标签名</th>
<th>语义</th>
</tr>
</thead>
<tbody>
<tr>
<td>header</td>
<td>网页头部</td>
</tr>
<tr>
<td>nav</td>
<td>网页导航</td>
</tr>
<tr>
<td>footer</td>
<td>网页底部</td>
</tr>
<tr>
<td>aside</td>
<td>网页侧边栏</td>
</tr>
<tr>
<td>section</td>
<td>网页区块</td>
</tr>
<tr>
<td>article</td>
<td>网页文章</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>显示特点和div一致，但是比div多了不同的语义</p>
</li>
<li><p>常用于做手机端 3</p>
</li>
</ul>
<h4 id="字符实体"><a href="#字符实体" class="headerlink" title="字符实体"></a>字符实体</h4><p>通过字符实体在网页中显示特殊符号</p>
<p>HTML会将多个空格吞为一个空格，要显示多个空格就字符实体</p>
<p>结构：&amp;英文</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>显示结果</th>
<th>描述</th>
<th>实体名称</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>空格</td>
<td>&amp;nbsp</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于号</td>
<td>&amp;lt</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于号</td>
<td>&amp;gt</td>
</tr>
</tbody>
</table>
</div>
<p>其他字符可查<a href="https://www.w3school.com.cn/html/html_entities.asp">HTML 字符实体 (w3school.com.cn)</a></p>
<h2 id="CSS基础"><a href="#CSS基础" class="headerlink" title="CSS基础"></a>CSS基础</h2><h3 id="CSS基本语法"><a href="#CSS基本语法" class="headerlink" title="CSS基本语法"></a>CSS基本语法</h3><p>CSS写在哪里</p>
<ul>
<li>css写在style标签中，style标签一般写在head标签里面，title标签下面</li>
</ul>
<h4 id="注释-1"><a href="#注释-1" class="headerlink" title="注释"></a>注释</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 这是css的注释方式 */</span></span><br></pre></td></tr></table></figure>
<h4 id="CSS基本形式"><a href="#CSS基本形式" class="headerlink" title="CSS基本形式"></a>CSS基本形式</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>p</code>是选择器，red是color参数的值</li>
</ul>
<h4 id="CSS引入方式"><a href="#CSS引入方式" class="headerlink" title="CSS引入方式"></a>CSS引入方式</h4><ol>
<li><p><strong>内联式</strong>：将CSS（层叠样式表）写在style标签中</p>
</li>
<li><p><strong>外联式</strong>：将CSS写在单独的.css文件中，需要通过link标签在网页中引入</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 关系为样式表 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p><strong>行内式</strong>：将CSS写在标签的style属性中</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: red;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>只需将css文件中大括号里面的内容写入双引号内</li>
</ul>
</li>
</ol>
<p><strong>常见使用场景</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>引入方式</th>
<th>书写位置</th>
<th>作用范围</th>
<th>使用场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>内嵌式</td>
<td>CSS写在style标签中</td>
<td>当前页面</td>
<td>小案例</td>
</tr>
<tr>
<td>外联式</td>
<td>CSS写在单独的css文件中，通过link标签引入</td>
<td>多个页面</td>
<td>项目中</td>
</tr>
<tr>
<td>行内式</td>
<td>CSS写在标签的style属性中</td>
<td>当前标签</td>
<td>配合js使用</td>
</tr>
</tbody>
</table>
</div>
<h4 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h4><h5 id="标签选择器"><a href="#标签选择器" class="headerlink" title="标签选择器"></a>标签选择器</h5><p>结构：<code>标签名&#123;css属性名: 属性值;&#125;</code></p>
<ul>
<li>选择一类标签，无论嵌套关系有多深</li>
</ul>
<h5 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h5><p>结构：<code>.类名&#123;css属性名: 属性值;&#125;</code></p>
<ul>
<li><p>所有标签都有class属性，其属性值为<strong>类名</strong></p>
</li>
<li><p>类名由数字、字母、下划线、中划线组成，但不能以数字或中划线开头</p>
</li>
<li><p>一个标签<strong>可以同时拥有多个类名</strong>，类名之间用空格隔开</p>
<p>例如：<code>&lt;p class=&quot;red size&quot;&gt;&lt;/p&gt;</code></p>
</li>
<li><p>类名可重复，一个类选择器可以同时选中多个标签</p>
</li>
</ul>
<h5 id="id选择器"><a href="#id选择器" class="headerlink" title="id选择器"></a>id选择器</h5><p>结构：<code>#id属性值&#123;css属性名: 属性值;&#125;</code></p>
<ul>
<li>所有标签上都有id属性</li>
<li>id属性在一个页面中是<strong>唯一的、不重复的</strong></li>
<li><p>一个标签上只能由一个id属性值，一个id选择器只能选中一个标签</p>
</li>
<li><p>常配合js寻找标签</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">&quot;blue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#blue</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="通配符选择器"><a href="#通配符选择器" class="headerlink" title="通配符选择器"></a>通配符选择器</h5><p>结构：<code>*&#123;css属性名: 属性值;&#125;</code></p>
<p>作用：找到页面中所有的标签，设置样式</p>
<h4 id="文本样式"><a href="#文本样式" class="headerlink" title="文本样式"></a>文本样式</h4><h5 id="字体大小"><a href="#字体大小" class="headerlink" title="字体大小"></a>字体大小</h5><p>属性名：<strong>font-size</strong></p>
<p>取值：数字 + px（谷歌浏览器<strong>默认文字大小是16px</strong>）</p>
<h5 id="字体粗细"><a href="#字体粗细" class="headerlink" title="字体粗细"></a>字体粗细</h5><p>属性名：<strong>font-weight</strong></p>
<p>取值：</p>
<ul>
<li>关键字：normal（正常）、bold（加粗）</li>
<li><p>纯数字：100~900的整百数，400（正常）、700（加粗）</p>
</li>
<li><p>不是所有字体都提供了九种粗细</p>
</li>
</ul>
<h5 id="字体样式"><a href="#字体样式" class="headerlink" title="字体样式"></a>字体样式</h5><p>属性名：<strong>font-style</strong></p>
<p>取值：</p>
<ul>
<li>正常（默认值）：normal</li>
<li>倾斜：italic</li>
</ul>
<h5 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h5><ul>
<li><p>Windows中默认字体是微软雅黑</p>
</li>
<li><p>macOS中默认字体是苹方</p>
</li>
</ul>
<p>属性名：<strong>font-family</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: 宋体,黑体,sans-serif;</span><br><span class="line">    <span class="comment">/*如果电脑没有安装宋体，就使用黑体*/</span></span><br><span class="line">    <span class="comment">/*sans-serif表示无衬线字体*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="样式的层叠问题"><a href="#样式的层叠问题" class="headerlink" title="样式的层叠问题"></a>样式的层叠问题</h5><p>如果给同一个标签设置了相同的属性，此时样式会层叠（覆盖），写在最下面的会生效</p>
<h5 id="font复合属性"><a href="#font复合属性" class="headerlink" title="font复合属性"></a>font复合属性</h5><p>属性名：<strong>font</strong></p>
<p>取值：<code>font:style weight size family</code> </p>
<p>省略要求：只能省略前两个（相当于设置为默认值）</p>
<h5 id="文本缩进"><a href="#文本缩进" class="headerlink" title="文本缩进"></a>文本缩进</h5><p>属性名：<strong>text-indent</strong></p>
<p>取值：</p>
<ul>
<li>数字+px</li>
<li>数字+em（推荐：1em = 当前标签的font-size的大小）</li>
</ul>
<h5 id="文本水平对齐方式"><a href="#文本水平对齐方式" class="headerlink" title="文本水平对齐方式"></a>文本水平对齐方式</h5><p>属性名：<strong>text-align</strong></p>
<p>取值：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">属性值</th>
<th style="text-align:center">效果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">left</td>
<td style="text-align:center">左对齐</td>
</tr>
<tr>
<td style="text-align:center">center</td>
<td style="text-align:center">居中对齐</td>
</tr>
<tr>
<td style="text-align:center">right</td>
<td style="text-align:center">右对齐</td>
</tr>
</tbody>
</table>
</div>
<p>text-align: center 能让哪些元素水平居中</p>
<ol>
<li>文本</li>
<li>span标签、a标签</li>
<li>input标签、img标签</li>
</ol>
<p><strong>注意：要让元素水平居中，text-align: center需要给以上元素的 <u>父元素</u> 设置</strong></p>
<h5 id="文本修饰线"><a href="#文本修饰线" class="headerlink" title="文本修饰线"></a>文本修饰线</h5><p>属性名：<strong>text-decoration</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性值</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>underline</td>
<td>下划线</td>
</tr>
<tr>
<td>line-through</td>
<td>删除线</td>
</tr>
<tr>
<td>overline</td>
<td>上划线</td>
</tr>
<tr>
<td>none</td>
<td>无装饰线</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>开发中常常会使用<code>text-decoration: none;</code>清楚a标签默认的下划线</li>
</ul>
<h5 id="行高"><a href="#行高" class="headerlink" title="行高"></a>行高</h5><p>属性名：<strong>line-height</strong></p>
<p>作用：控制一行的上下行间距</p>
<p>取值：</p>
<ol>
<li>数字+px</li>
<li>倍数（当前标签font-size的倍数）</li>
</ol>
<p><img src="/images/line-height.png" style="zoom: 33%;" /></p>
<p>与font连写：<code>font: style size/line-height familt;</code></p>
<h5 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h5><p>文字颜色：<strong>color</strong></p>
<p>背景颜色：<strong>background-color</strong></p>
<p>常用表示法：</p>
<ul>
<li>关键词：red、green</li>
<li><p>rgb表示法：红绿蓝（0-255）</p>
</li>
<li><p>十六进制表示法：<code>#</code>开头，<code>#000000</code>表示纯黑色（RGB），可简写<code>#000</code>（两位相同）</p>
</li>
<li><p>rgba写法：红绿蓝（0-255）+透明度（0-1）</p>
</li>
</ul>
<h5 id="标签水平居中"><a href="#标签水平居中" class="headerlink" title="标签水平居中"></a>标签水平居中</h5><p>实现让div、p、h（大盒子）水平居中</p>
<ul>
<li>通过对 <strong>当前元素本身</strong> 设置<code>margin: 0 auto;</code>实现。</li>
<li>如果当前盒子没有设置宽度，此时会默认占满父元素的宽度</li>
</ul>
<hr>
<h3 id="CSS进阶"><a href="#CSS进阶" class="headerlink" title="CSS进阶"></a>CSS进阶</h3><h4 id="选择器-1"><a href="#选择器-1" class="headerlink" title="选择器"></a>选择器</h4><h5 id="复合选择器"><a href="#复合选择器" class="headerlink" title="复合选择器"></a>复合选择器</h5><p><strong>后代选择器</strong></p>
<p>作用：根据HTML标签的嵌套关系，选择父元素 <strong>后代中</strong> 满足条件的元素</p>
<p>语法：<code>选择器1 选择器2 &#123;css&#125;</code></p>
<p><strong>子代选择器</strong></p>
<p>作用：根据HTML标签的嵌套关系，选择父元素 <strong>子代中</strong> 满足条件的元素（子代<u>只包括儿子</u>）</p>
<p>语法：<code>选择器1 &gt; 选择器2 &#123;css&#125;</code></p>
<h5 id="并集选择器"><a href="#并集选择器" class="headerlink" title="并集选择器"></a>并集选择器</h5><p>作用：同时选择多组标签，设置相同的样式</p>
<p>语法：<code>选择器1, 选择器2 &#123;css&#125;</code></p>
<blockquote>
<p>推荐每一个选择器逗号后换行</p>
</blockquote>
<h5 id="交集选择器"><a href="#交集选择器" class="headerlink" title="交集选择器"></a>交集选择器</h5><p>作用：选择同时满足多个选择器的标签</p>
<p>语法：<code>选择器1选择器2 &#123;css&#125;</code></p>
<p>参考代码</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="hover伪类选择器"><a href="#hover伪类选择器" class="headerlink" title="hover伪类选择器"></a>hover伪类选择器</h5><p>作用：选中鼠标<strong>悬停</strong>在元素上的<strong>状态</strong>，设置样式</p>
<p>语法：<code>选择器:hover&#123; css &#125;</code></p>
<ul>
<li><p>任何标签都可以添加伪类</p>
</li>
<li><p><code>:</code>与<code>hover</code>之间不能有空格！</p>
</li>
</ul>
<h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><h5 id="背景颜色"><a href="#背景颜色" class="headerlink" title="背景颜色"></a>背景颜色</h5><p>属性名：<strong>background-color</strong>(bgc)</p>
<ul>
<li>背景颜色默认是透明的</li>
</ul>
<h5 id="背景图片"><a href="#背景图片" class="headerlink" title="背景图片"></a>背景图片</h5><p>属性名：<strong>background-image</strong>(bgi)</p>
<p>属性值：<code>background-image: url(&#39;图片的路径&#39;);</code></p>
<ul>
<li>若背景图片小于当前盒子的大小，则默认重复平铺</li>
</ul>
<h5 id="背景平铺"><a href="#背景平铺" class="headerlink" title="背景平铺"></a>背景平铺</h5><p>属性名：<strong>background-repeat</strong>(bgr)</p>
<p>属性值：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">取值</th>
<th style="text-align:center">效果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">repeat</td>
<td style="text-align:center">（默认）水平和垂直方向都平铺</td>
</tr>
<tr>
<td style="text-align:center">no-repeat</td>
<td style="text-align:center">不平铺</td>
</tr>
<tr>
<td style="text-align:center">repeat-x</td>
<td style="text-align:center">沿着水平方向（x轴）平铺</td>
</tr>
<tr>
<td style="text-align:center">repeat-y</td>
<td style="text-align:center">沿着垂直方向（y轴）平铺</td>
</tr>
</tbody>
</table>
</div>
<h5 id="背景位置"><a href="#背景位置" class="headerlink" title="背景位置"></a>背景位置</h5><p>属性名：<strong>background-position</strong>(bgp)</p>
<p>属性值：<code>background-postion: 水平方向位置 垂直方向位置;</code></p>
<p><img src="/images/postion.png" alt="image-20221017114548382" style="zoom: 67%;" /></p>
<ul>
<li>取值可以为负，但背景色和背景图只显示在盒子里面</li>
</ul>
<h5 id="背景相关属性连写"><a href="#背景相关属性连写" class="headerlink" title="背景相关属性连写"></a>背景相关属性连写</h5><p>属性名：<strong>backgound</strong></p>
<p>推荐书写顺序：<code>background: color image repeat position</code></p>
<h4 id="元素显示模式"><a href="#元素显示模式" class="headerlink" title="元素显示模式"></a>元素显示模式</h4><h5 id="块级元素"><a href="#块级元素" class="headerlink" title="块级元素"></a>块级元素</h5><p>显示特点：</p>
<ol>
<li>独占一行</li>
<li>宽度默认是父元素的宽度，高度默认由内容撑开，可以设置宽高</li>
</ol>
<p>例如：div、p、h、form</p>
<h5 id="行内元素"><a href="#行内元素" class="headerlink" title="行内元素"></a>行内元素</h5><p>显示特点：</p>
<ol>
<li>一行可以显示多个</li>
<li>宽度和高度默认由内容撑开，<strong>不可以设置宽高</strong></li>
</ol>
<p>例如：<strong>a、span</strong>、b、u</p>
<h5 id="行内块元素"><a href="#行内块元素" class="headerlink" title="行内块元素"></a>行内块元素</h5><p>显示特点：</p>
<ol>
<li>一行可以显示多个</li>
<li>可以设置宽高</li>
</ol>
<p>例如：input、textarea、button、select</p>
<ul>
<li>img标签由行内块元素的特点，但是Chrome调试器显示为inline</li>
</ul>
<h5 id="元素显示模式转换"><a href="#元素显示模式转换" class="headerlink" title="元素显示模式转换"></a>元素显示模式转换</h5><p>改变元素的显示特点：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性</th>
<th>效果</th>
<th>使用频率</th>
</tr>
</thead>
<tbody>
<tr>
<td>display: block</td>
<td>转换成块级元素</td>
<td>较多</td>
</tr>
<tr>
<td>display: inline-block</td>
<td>转换成行内块元素</td>
<td>较多</td>
</tr>
<tr>
<td>display: inline</td>
<td>转换成行内元素</td>
<td>较少</td>
</tr>
</tbody>
</table>
</div>
<h5 id="HTML元素嵌套注意点"><a href="#HTML元素嵌套注意点" class="headerlink" title="HTML元素嵌套注意点"></a>HTML元素嵌套注意点</h5><ul>
<li><p>p标签中不要嵌套div、p、h等块级元素</p>
</li>
<li><p>a标签不能嵌套a标签</p>
</li>
</ul>
<h4 id="CSS特性"><a href="#CSS特性" class="headerlink" title="CSS特性"></a>CSS特性</h4><h5 id="继承性"><a href="#继承性" class="headerlink" title="继承性"></a>继承性</h5><p>子元素默认继承父元素样式的特点，如color,font,text-indent,line-height（<strong>文字控制属性都可以继承</strong>）</p>
<p>特殊情况：</p>
<ol>
<li>a标签的color会继承失效</li>
<li>h系列标签的font-size会继承失效</li>
</ol>
<h5 id="层叠性"><a href="#层叠性" class="headerlink" title="层叠性"></a>层叠性</h5><p>属性层层叠加（不同属性）或覆盖（相同属性）</p>
<p>只用选择器优先级相同时，才通过层叠性判断结果</p>
<hr>
<h3 id="CSS盒子模型"><a href="#CSS盒子模型" class="headerlink" title="CSS盒子模型"></a>CSS盒子模型</h3><h4 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h4><p>优先级高的选择器样式会覆盖优先级低选择器样式</p>
<p>优先级：</p>
<p><code>继承 &lt; 通配符选择器 &lt; 标签选择器 &lt; 类选择器 &lt; id选择器 &lt; 行内样式 &lt;!important</code></p>
<p><strong>!important使用说明</strong></p>
<ol>
<li>!important写在属性值的后面，分号的前面</li>
<li>!important不能提升继承的优先级</li>
<li>实际开发中<strong>不建议</strong>使用!important</li>
</ol>
<h4 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h4><p>CSS中规定每个盒子分别由：内容区域(content)、内边距区域（padding）、边框区域（border）、外边框区域（margin）构成，这就是 <strong>盒子模型</strong></p>
<p><img src="/images/box.png" alt="box" style="zoom: 67%;" /></p>
<h4 id="边框-border"><a href="#边框-border" class="headerlink" title="边框(border)"></a>边框(border)</h4><p>border连写形式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border</span>: <span class="number">10px</span> solid red;</span><br><span class="line"><span class="comment">/*solid 表示实线*/</span></span><br></pre></td></tr></table></figure>
<p><strong>单方向设置</strong></p>
<p>属性名：border-方位名词(left)</p>
<ul>
<li>要注意border会<strong>撑大盒子的尺寸</strong>，写代码时要注意减去边框的尺寸</li>
</ul>
<p><strong>圆角设置</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>盒子模型的布局顺序：<strong><u>从外到内、从上到下</u></strong></p>
</blockquote>
<h4 id="内边距-padding"><a href="#内边距-padding" class="headerlink" title="内边距(padding)"></a>内边距(padding)</h4><p>padding：上右下左四个方向的内边距</p>
<ul>
<li><p>padding属性可以当作<strong>复合属性</strong>使用，单独设置某个方向的内边距（上右下左顺时针方向）</p>
</li>
<li><p>若取三个值：上、左右、下</p>
</li>
<li><p>若取两个值：上下、左右</p>
</li>
</ul>
<blockquote>
<p>使用<code>padding: 0 16px;</code>替换 <code>width</code> 可提高网页修改的灵活性</p>
</blockquote>
<h4 id="CSS3自动内减"><a href="#CSS3自动内减" class="headerlink" title="CSS3自动内减"></a>CSS3自动内减</h4><p>给盒子设置属性：<code>box-sizing: border-box;</code>即可</p>
<p>优点：浏览器会自动计算多余大小，自动<strong>在内容中减去</strong></p>
<h4 id="外边距-margin"><a href="#外边距-margin" class="headerlink" title="外边距(margin)"></a>外边距(margin)</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">margin</span>: <span class="number">50px</span>;</span><br><span class="line"><span class="attribute">margin-left</span>: <span class="number">20px</span>;</span><br></pre></td></tr></table></figure>
<p>margin只设置两个值、三个值的用法与padding相同。</p>
<p><strong>默认的内外间距</strong>：</p>
<p>清除默认间距：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>版心：网页的有效内容，一般居中</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br></pre></td></tr></table></figure>
<p><strong>外间距的合并现象</strong>：</p>
<p>垂直布局的块级元素，上下的margin会合并，最终两者距离为margin的最大值</p>
<p><strong>外间距的塌陷现象</strong>：</p>
<p>互相嵌套的块级元素，子元素的margin-top会作用在父元素上</p>
<ul>
<li>可以改为设置父元素的padding-top</li>
<li>也可以给父元素设置overflow: hidden</li>
</ul>
<p>注意：无法用padding和margin修改行内元素的位置，可以使用line-height</p>
<hr>
<h3 id="CSS浮动"><a href="#CSS浮动" class="headerlink" title="CSS浮动"></a>CSS浮动</h3><h4 id="结构伪类选择器"><a href="#结构伪类选择器" class="headerlink" title="结构伪类选择器"></a>结构伪类选择器</h4><div class="table-container">
<table>
<thead>
<tr>
<th>选择器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>E:first-child {}</td>
<td>匹配父元素中的第一个子元素，并且是E元素</td>
</tr>
<tr>
<td>E:last-child {}</td>
<td>匹配父元素中的最后一个子元素，并且是E元素</td>
</tr>
<tr>
<td>E:nth-child(n) {}</td>
<td>匹配父元素中的第n个子元素，并且是E元素</td>
</tr>
<tr>
<td>E:nth-last-child(n) {}</td>
<td>匹配父元素中的倒数第n个子元素，并且是E元素</td>
</tr>
</tbody>
</table>
</div>
<p>括号中的n还可以填<code>even</code>、<code>odd</code>、<code>2n</code>、<code>4n</code></p>
<ul>
<li>-n+3表示前3个，n+3表示从第3个后开始</li>
</ul>
<h4 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h4><p>一般网页中的非主体元素可以使用伪元素，伪元素是由CSS模拟出的标签效果</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>伪元素</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>::before</code></td>
<td>在父元素内容的最前添加一个伪元素</td>
</tr>
<tr>
<td><code>::after</code></td>
<td>在父元素内容的最后添加一个伪元素</td>
</tr>
</tbody>
</table>
</div>
<p>注意必须要加content，默认是行内标签，使用示例：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.father</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;内容&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="标准流"><a href="#标准流" class="headerlink" title="标准流"></a>标准流</h4><p>规则：</p>
<ol>
<li>块级元素：从上往下，垂直布局，独占一行</li>
<li>行内元素或行内块元素：从左往右，水平布局，空间不够自动折行</li>
</ol>
<h4 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h4><p>浏览器解析行内块或行内标签时，浏览器会产生一个空格的距离</p>
<p><strong>图文环绕</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>块布局</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.one</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.two</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*两个div会在同一行显示，并一个在最左，一个在最右*/</span></span><br></pre></td></tr></table></figure>
<p><strong>浮动的特点：</strong></p>
<ol>
<li>浮动元素会脱离标准流，在标准流中不占位置</li>
<li>浮动元素比标准流高半个级别，可以覆盖标准流中的元素</li>
<li>浮动找浮动，下一个浮动元素会在上一个浮动元素后面左右浮动</li>
<li>浮动标签具备行内块特点</li>
<li>浮动的元素不能通过<code>text-align:center</code>或者<code>margin: 0 auto</code></li>
</ol>
<p><strong>清除浮动：</strong></p>
<p>直接给父元素设置overflow: hidden</p>
<h4 id="CSS书写顺序"><a href="#CSS书写顺序" class="headerlink" title="CSS书写顺序"></a>CSS书写顺序</h4><ol>
<li>浮动 / display</li>
<li>盒子模型相关属性：margin border padding 宽高背景色</li>
<li>文字样式</li>
</ol>
<blockquote>
<p>按照这样的顺序写，这样浏览器的执行顺序更快</p>
</blockquote>
<h3 id="CSS定位装饰"><a href="#CSS定位装饰" class="headerlink" title="CSS定位装饰"></a>CSS定位装饰</h3><p>三种布局方式：标准流、浮动、定位</p>
<h4 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h4><ol>
<li>可以让元素自由地摆放在网页的任意位置</li>
<li>一般用于 <strong>盒子之间的层叠情况</strong>， 也可以让盒子始终固定在屏幕中的某个位置</li>
</ol>
<p><strong>设置定位方式</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>定位方式</th>
<th>属性值</th>
</tr>
</thead>
<tbody>
<tr>
<td>相对定位</td>
<td>relative</td>
</tr>
<tr>
<td>绝对定位</td>
<td>absolute</td>
</tr>
<tr>
<td>固定定位</td>
<td>fixed</td>
</tr>
</tbody>
</table>
</div>
<p><strong>设置偏移值</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>方向</th>
<th>属性名</th>
<th>属性值</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>水平</td>
<td>left</td>
<td>数字+px</td>
<td>距离左边的距离</td>
</tr>
<tr>
<td>水平</td>
<td>right</td>
<td>数字+px</td>
<td>距离右边的距离</td>
</tr>
<tr>
<td>垂直</td>
<td>top</td>
<td>数字+px</td>
<td>距离上边的距离</td>
</tr>
<tr>
<td>垂直</td>
<td>bottom</td>
<td>数字+px</td>
<td>距离下边的距离</td>
</tr>
</tbody>
</table>
</div>
<h5 id="相对定位"><a href="#相对定位" class="headerlink" title="相对定位"></a>相对定位</h5><p>相对定位：<u>相对于自己之前的位置</u>进行移动</p>
<p><code>postion:relative;</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    postion:relative;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ol>
<li>占有原来的位置，没有脱标（标准流）</li>
<li>仍然具有标签原有的显示模式</li>
<li>如果由多个属性，以left与top为准</li>
</ol>
<h5 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h5><p>绝对定位：相对于非静态定位的父元素进行定位移动</p>
<p><code>postion:absolute;</code></p>
<p>有父级但父级元素没有定位，以浏览器窗口为参照进行定位。</p>
<p>注意：</p>
<ol>
<li>不占有原有的位置，脱标</li>
<li><strong>一般子级用绝对定位，父级用相对定位</strong></li>
<li>绝对定位的盒子不能使用margin: auto实现左右居中</li>
<li>绝对定位的盒子显示模式具备行内块的特点，加宽度高度生效，若无宽高，则为0</li>
</ol>
<p>参考代码</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> <span class="selector-class">.content</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.box</span> <span class="selector-class">.content</span> <span class="selector-tag">li</span> <span class="selector-class">.hot</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: -<span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="实现居中效果"><a href="#实现居中效果" class="headerlink" title="实现居中效果"></a>实现居中效果</h5><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">150px</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>提高可修改性</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">    <span class="comment">/*位移，移动自己的50%*/</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="固定定位"><a href="#固定定位" class="headerlink" title="固定定位"></a>固定定位</h5><p>固定定位：相对于浏览器进行定位移动</p>
<p>代码：<code>position: fixed;</code></p>
<p>脱标，不占位置，具备行内块特点</p>
<h4 id="元素层级关系"><a href="#元素层级关系" class="headerlink" title="元素层级关系"></a>元素层级关系</h4><ul>
<li><p>标准流 &lt; 浮动 &lt; 定位</p>
</li>
<li><p>默认情况下，定位的盒子后来者居上</p>
</li>
<li><p><code>z-index</code>整数，取值越大显示顺序越靠上，默认值为0</p>
</li>
</ul>
<h4 id="装饰"><a href="#装饰" class="headerlink" title="装饰"></a>装饰</h4><h5 id="vertival-align"><a href="#vertival-align" class="headerlink" title="vertival-align"></a>vertival-align</h5><p>属性名：vertival-align</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性值</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>baseline</td>
<td>默认，基线对齐</td>
</tr>
<tr>
<td>top</td>
<td>顶部对齐</td>
</tr>
<tr>
<td>middle</td>
<td>中部对齐</td>
</tr>
<tr>
<td>bottom</td>
<td>底部对齐</td>
</tr>
</tbody>
</table>
</div>
<p>浏览器遇到行内和行内块标签当作文字处理，默认文字按基线对齐</p>
<h5 id="光标类型"><a href="#光标类型" class="headerlink" title="光标类型"></a>光标类型</h5><p>属性名：cursor</p>
<p>设置鼠标光标在元素上时显示的样式</p>
<p>常见属性值：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性值</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>default</td>
<td>默认值，通常时箭头</td>
</tr>
<tr>
<td>pointer</td>
<td>小手效果，提示用户可以点击</td>
</tr>
<tr>
<td>text</td>
<td>工字型，提示用户可以选择文字</td>
</tr>
<tr>
<td>move</td>
<td>十字光标，提示用户可以移动</td>
</tr>
</tbody>
</table>
</div>
<h5 id="圆角边框"><a href="#圆角边框" class="headerlink" title="圆角边框"></a>圆角边框</h5><p>属性名：border-radius</p>
<p>常见取值：数字+px， 百分比</p>
<p><strong>赋值规则：从左上角开始顺时针赋值，没有赋值的看对角</strong></p>
<p>一个值表示四个角相同</p>
<p>应用：</p>
<ol>
<li>画一个正圆<ul>
<li>盒子必须是正方形</li>
<li>设置边框圆角为盒子宽高的一半<code>border-radius:50%</code></li>
</ul>
</li>
<li>胶囊按钮<ul>
<li>盒子要求是长方形</li>
<li>设置边框圆角为盒子高度的一半</li>
</ul>
</li>
</ol>
<h5 id="溢出部分显示效果"><a href="#溢出部分显示效果" class="headerlink" title="溢出部分显示效果"></a>溢出部分显示效果</h5><p>溢出部分指盒子内容部分超出盒子范围的区域</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>属性值</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>visble</td>
<td>默认值，溢出部分可见</td>
</tr>
<tr>
<td>hidden</td>
<td>溢出部分隐藏</td>
</tr>
<tr>
<td>scroll</td>
<td>无论是否溢出，都显示滚动条</td>
</tr>
<tr>
<td>auto</td>
<td>根据是否溢出，自动显示或隐藏滚动条</td>
</tr>
</tbody>
</table>
</div>
<h5 id="元素本身的隐藏"><a href="#元素本身的隐藏" class="headerlink" title="元素本身的隐藏"></a>元素本身的隐藏</h5><ul>
<li><p><code>visibility:hidden</code>占位隐藏</p>
</li>
<li><p><code>display: none</code>一般用这个，<strong>不占位隐藏</strong></p>
</li>
</ul>
<h5 id="元素整体透明度"><a href="#元素整体透明度" class="headerlink" title="元素整体透明度"></a>元素整体透明度</h5><p>属性名：opacity</p>
<ul>
<li><p>1为完全不透明</p>
</li>
<li><p>0为完全透明</p>
</li>
</ul>
<h2 id="快速开发指南"><a href="#快速开发指南" class="headerlink" title="快速开发指南"></a>快速开发指南</h2><h3 id="VScode"><a href="#VScode" class="headerlink" title="VScode"></a>VScode</h3><h4 id="emmet语法"><a href="#emmet语法" class="headerlink" title="emmet语法"></a>emmet语法</h4><div class="table-container">
<table>
<thead>
<tr>
<th>记忆</th>
<th>示例</th>
<th>效果</th>
</tr>
</thead>
<tbody>
<tr>
<td>标签名</td>
<td><code>div</code></td>
<td><code>&lt;div&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td>类选择器</td>
<td><code>.red</code></td>
<td><code>&lt;div class=&quot;red&quot;&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td>id选择器</td>
<td><code>#one</code></td>
<td><code>&lt;div id=&quot;one&quot;&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td>创建多个li</td>
<td><code>ul&gt;li*3</code></td>
<td><code>&lt;ul&gt;&lt;li&gt;&lt;/li&gt;&lt;li&gt;&lt;/li&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;</code></td>
</tr>
</tbody>
</table>
</div>
<h4 id="快捷开发按键"><a href="#快捷开发按键" class="headerlink" title="快捷开发按键"></a>快捷开发按键</h4><p>Alt+Shift+鼠标左键单击</p>
<h3 id="PxCook"><a href="#PxCook" class="headerlink" title="PxCook"></a>PxCook</h3><p>好用的设计/生成前端代码工具</p>
<p><a href="https://www.fancynode.com.cn/pxcook">PxCook - 高效易用的自动标注工具,生成前端代码,设计研发协作利器 (fancynode.com.cn)</a></p>
]]></content>
      <tags>
        <tag>Web开发</tag>
      </tags>
  </entry>
  <entry>
    <title>大一上C语言小作业——2048小游戏</title>
    <url>/2022/02/24/2048/</url>
    <content><![CDATA[<h3 id="大一上C语言小作业——2048小游戏"><a href="#大一上C语言小作业——2048小游戏" class="headerlink" title="大一上C语言小作业——2048小游戏"></a>大一上C语言小作业——2048小游戏</h3><p>项目要求：使用C语言编写2048小游戏</p>
<h4 id="界面设置部分"><a href="#界面设置部分" class="headerlink" title="界面设置部分"></a>界面设置部分</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">HideCursor</span><span class="params">()</span> &#123;            <span class="comment">//隐藏光标</span></span><br><span class="line">    CONSOLE_CURSOR_INFO curInfo;</span><br><span class="line">    curInfo.dwSize = <span class="number">1</span>;</span><br><span class="line">    curInfo.bVisible = FALSE;</span><br><span class="line">    HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    SetConsoleCursorInfo(handle, &amp;curInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Goto</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;       <span class="comment">//光标移动到(x,y)位置</span></span><br><span class="line">    COORD pos;</span><br><span class="line">    pos.X = x;</span><br><span class="line">    pos.Y = y;</span><br><span class="line">    HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    SetConsoleCursorPosition(handle, pos);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PreWork</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;title 2048&quot;</span>);        <span class="comment">//窗口标题为2048</span></span><br><span class="line">    system(<span class="string">&quot;mode con cols=40 lines=21&quot;</span>);  <span class="comment">//窗口大小</span></span><br><span class="line">    system(<span class="string">&quot;chcp 65001 &gt; nul&quot;</span>);  <span class="comment">//中文支持</span></span><br><span class="line">    HideCursor();                <span class="comment">//隐藏光标</span></span><br><span class="line">    CONSOLE_FONT_INFOEX cfi;</span><br><span class="line">    cfi.cbSize = <span class="keyword">sizeof</span> cfi;</span><br><span class="line">    cfi.nFont = <span class="number">0</span>;</span><br><span class="line">    cfi.dwFontSize.X = <span class="number">15</span>;</span><br><span class="line">    cfi.dwFontSize.Y = <span class="number">30</span>;</span><br><span class="line">    cfi.FontFamily = FF_DONTCARE;</span><br><span class="line">    cfi.FontWeight = FW_NORMAL;</span><br><span class="line">    SetCurrentConsoleFontEx(GetStdHandle(STD_OUTPUT_HANDLE), FALSE, &amp;cfi);</span><br><span class="line">    srand((<span class="type">unsigned</span>) time(<span class="literal">NULL</span>));  <span class="comment">//随机函数种子</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="游戏初始化"><a href="#游戏初始化" class="headerlink" title="游戏初始化"></a>游戏初始化</h4><p>游戏”棋盘“初始化要做的事：</p>
<ul>
<li>清空“棋盘”</li>
<li>生成两个数（2或4），其中生成2的概率较大</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">InitGameMap</span><span class="params">()</span> &#123;</span><br><span class="line">    score = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(gameMap, <span class="number">-1</span>, <span class="keyword">sizeof</span>(gameMap));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (total &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> y = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> temp = rand() % <span class="number">6</span> + <span class="number">1</span>;  <span class="comment">//temp 的范围是[1, 6]</span></span><br><span class="line">        <span class="type">int</span> num = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (temp == <span class="number">1</span>) num = <span class="number">4</span>;     <span class="comment">//设置1/6的概率生成数字4</span></span><br><span class="line">        <span class="keyword">if</span> (!gameMap[x][y]) &#123;</span><br><span class="line">            gameMap[x][y] = num;</span><br><span class="line">            total++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h4 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h4><p>2048游戏中最关键的就是处理按下方向键后，棋盘中数字的移动。以向左移动为例：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">MoveLeft</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;  <span class="comment">//处理第i行</span></span><br><span class="line">        <span class="type">int</span> k = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[i][k]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[i][k] = gameMap[i][j];</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[i][k] != gameMap[i][j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k + <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[i][k + <span class="number">1</span>] = gameMap[i][j];</span><br><span class="line">                        gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">//merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[i][k] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[i][k];</span><br><span class="line">                    k++;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其余移动原理相同，不再赘述。</p>
<h4 id="判断游戏输赢"><a href="#判断游戏输赢" class="headerlink" title="判断游戏输赢"></a>判断游戏输赢</h4><p><code>CheckGame()</code>函数用来判断游戏输赢：</p>
<ul>
<li>若棋盘上有数字达到2048则<strong>胜利</strong></li>
<li>若棋盘已满且无法移动（任何两个相邻的数都不相同）则<strong>失败</strong></li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">CheckGame</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> count_of_zero = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!gameMap[i][j]) count_of_zero++;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j] == <span class="number">2048</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;                                 <span class="comment">// win</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span> (count_of_zero)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;                                         <span class="comment">// continue</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j] == gameMap[i + <span class="number">1</span>][j]</span><br><span class="line">                || gameMap[i][j] == gameMap[i - <span class="number">1</span>][j]</span><br><span class="line">                || gameMap[i][j] == gameMap[i][j + <span class="number">1</span>]</span><br><span class="line">                || gameMap[i][j] == gameMap[i][j - <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;                                 <span class="comment">// continue</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;                                            <span class="comment">// lose</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="打印棋盘-amp-更新棋盘"><a href="#打印棋盘-amp-更新棋盘" class="headerlink" title="打印棋盘&amp;更新棋盘"></a>打印棋盘&amp;更新棋盘</h4><ul>
<li>尽量减少<code>system(&quot;pause&quot;)</code>语句的运用，能减少屏幕闪烁的情况。</li>
<li><code>PrintNumber</code>函数用来格式化地打印格子中的数</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">PrintNumber</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">10</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;  %d │&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; <span class="number">100</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot; %d │&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%4d│&quot;</span>, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMap</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    Goto(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (score &gt; best) best = score;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Score: %6d  Best: %6d\n&quot;</span>, score, best);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      _______________________ \n\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       ┌────┬────┬────┬────┐\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;       │&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j])</span><br><span class="line">                PrintNumber(gameMap[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;    │&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (i &lt;= <span class="number">3</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;       ├────┼────┼────┼────┤\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;       └────┴────┴────┴────┘\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      _______________________ \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[Q] Back to menu.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">UpdateMap</span><span class="params">()</span> &#123;  <span class="comment">//棋盘不用重新打印</span></span><br><span class="line">    Goto(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (score &gt; best) best = score;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Score: %6d  Best: %6d\n&quot;</span>, score, best);</span><br><span class="line">    Goto(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            Goto(<span class="number">3</span> + <span class="number">5</span> * j, i * <span class="number">2</span> + <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j])</span><br><span class="line">                PrintNumber(gameMap[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;    &quot;</span>);<span class="comment">//4:</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="游戏进行"><a href="#游戏进行" class="headerlink" title="游戏进行"></a>游戏进行</h4><ul>
<li>判断是新游戏模式还是旧游戏模式，如果是新游戏，则要初始化棋盘</li>
<li>处理键盘输入，进行数字的移动并生成新的数字</li>
<li>每次判断游戏是否结束</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">Game</span><span class="params">(<span class="type">int</span> game_type)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (game_type == <span class="number">1</span>) &#123;</span><br><span class="line">        InitGameMap();   <span class="comment">//new game</span></span><br><span class="line">        have_old_game = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> haveMap = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!haveMap) &#123;</span><br><span class="line">            ShowMap();</span><br><span class="line">            haveMap = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            UpdateMap();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> state = CheckGame();</span><br><span class="line">        <span class="keyword">if</span> (CheckGame() == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n              You Win!\n&quot;</span>);</span><br><span class="line">            system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            have_old_game = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (CheckGame() == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n              You Lose!\n&quot;</span>);</span><br><span class="line">            have_old_game = <span class="number">0</span>;</span><br><span class="line">            system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">char</span> type;</span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        type = getch();</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                MoveUp();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                MoveDown();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> LEFT:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">                MoveLeft();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RIGHT:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                MoveRight();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;q&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">                haveMap = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="type">int</span> count_of_zero = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">                    <span class="keyword">if</span> (!gameMap[i][j]) count_of_zero++;</span><br><span class="line">            <span class="keyword">if</span> (count_of_zero &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (total &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> x = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> y = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> temp = rand() % <span class="number">6</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> num = <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (temp == <span class="number">1</span>) num = <span class="number">4</span>;</span><br><span class="line">                    <span class="keyword">if</span> (!gameMap[x][y]) &#123;</span><br><span class="line">                        gameMap[x][y] = num;</span><br><span class="line">                        total++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="菜单界面"><a href="#菜单界面" class="headerlink" title="菜单界面"></a>菜单界面</h4><p>菜单界面<code>Menu()</code>要处理通过上下键或[W][S]键选择模式。<code>ShowMenu(x)</code>函数用来打印当前选择了<script type="math/tex">x</script>号模式时的菜单界面。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">ShowMenu</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    <span class="type">int</span> print_X = <span class="number">14</span>;</span><br><span class="line">    Goto(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       ____   ___  _  _    ___  \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      |___ \\ / _ \\| || |  ( _ ) \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;        __) | | | | || |_ / _ \\ \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       / __/| |_| |__   _| (_) |\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      |_____|\\___/   |_|  \\___/ \n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">7</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;1.New Game\n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">8</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;2.Old Game\n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">9</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;3.Exit\n&quot;</span>);</span><br><span class="line">    Goto(print_X - <span class="number">1</span>, <span class="number">6</span> + x);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">    Goto(<span class="number">3</span>, <span class="number">11</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Please type [UP][DOWN] or [w][s] \nto choose your game.\n   Type [ENTER] to enter the game.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Menu</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> now_point = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> last_point = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> haveMenu = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">char</span> type;</span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (!haveMenu) &#123;</span><br><span class="line">            ShowMenu(now_point);</span><br><span class="line">            haveMenu = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Goto(<span class="number">14</span> - <span class="number">1</span>, <span class="number">6</span> + now_point);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">            Goto(<span class="number">14</span> - <span class="number">1</span>, <span class="number">6</span> + last_point);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        type = getch();</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                last_point = now_point;</span><br><span class="line">                now_point = (now_point + <span class="number">1</span>) % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                last_point = now_point;</span><br><span class="line">                now_point = now_point % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> ENTER:</span><br><span class="line">                <span class="keyword">if</span> (now_point &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">                    haveMenu = <span class="number">0</span>;</span><br><span class="line">                    Game(now_point);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ROW 6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> COL 6</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAP_ROW 40</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAP_COL 30</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> UP 72</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> DOWN 80</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LEFT 75</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> RIGHT 77</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ENTER 13</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> n = <span class="number">4</span>;</span><br><span class="line"><span class="type">int</span> score = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> best = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> gameMap[ROW][COL];</span><br><span class="line"><span class="type">int</span> have_old_game = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HideCursor</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Goto</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitGameMap</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PreWork</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMap</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">UpdateMap</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Game</span><span class="params">(<span class="type">int</span> game_type)</span>;     <span class="comment">// begin the game</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveLeft</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveRight</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveUp</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveDown</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMenu</span><span class="params">(<span class="type">int</span> x)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Menu</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintNumber</span><span class="params">(<span class="type">int</span> x)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">CheckGame</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    PreWork();</span><br><span class="line">    Menu();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HideCursor</span><span class="params">()</span> &#123;</span><br><span class="line">    CONSOLE_CURSOR_INFO curInfo;</span><br><span class="line">    curInfo.dwSize = <span class="number">1</span>;</span><br><span class="line">    curInfo.bVisible = FALSE;</span><br><span class="line">    HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    SetConsoleCursorInfo(handle, &amp;curInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Goto</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    COORD pos;</span><br><span class="line">    pos.X = x;</span><br><span class="line">    pos.Y = y;</span><br><span class="line">    HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">    SetConsoleCursorPosition(handle, pos);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PreWork</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;title 2048&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;mode con cols=40 lines=21&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;chcp 65001 &gt; nul&quot;</span>);  <span class="comment">//Chinese</span></span><br><span class="line">    HideCursor();</span><br><span class="line">    CONSOLE_FONT_INFOEX cfi;</span><br><span class="line">    cfi.cbSize = <span class="keyword">sizeof</span> cfi;</span><br><span class="line">    cfi.nFont = <span class="number">0</span>;</span><br><span class="line">    cfi.dwFontSize.X = <span class="number">15</span>;</span><br><span class="line">    cfi.dwFontSize.Y = <span class="number">30</span>;</span><br><span class="line">    cfi.FontFamily = FF_DONTCARE;</span><br><span class="line">    cfi.FontWeight = FW_NORMAL;</span><br><span class="line">    SetCurrentConsoleFontEx(GetStdHandle(STD_OUTPUT_HANDLE), FALSE, &amp;cfi);</span><br><span class="line">    srand((<span class="type">unsigned</span>) time(<span class="literal">NULL</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitGameMap</span><span class="params">()</span> &#123;</span><br><span class="line">    score = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(gameMap, <span class="number">-1</span>, <span class="keyword">sizeof</span>(gameMap));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (total &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="type">int</span> x = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> y = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> temp = rand() % <span class="number">6</span> + <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> num = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (temp == <span class="number">1</span>) num = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">if</span> (!gameMap[x][y]) &#123;</span><br><span class="line">            gameMap[x][y] = num;</span><br><span class="line">            total++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintNumber</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">10</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;  %d │&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (x &lt; <span class="number">100</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot; %d │&quot;</span>, x);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%4d│&quot;</span>, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMap</span><span class="params">()</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    Goto(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (score &gt; best) best = score;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Score: %6d  Best: %6d\n&quot;</span>, score, best);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      _______________________ \n\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       ┌────┬────┬────┬────┐\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;       │&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j])</span><br><span class="line">                PrintNumber(gameMap[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;    │&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (i &lt;= <span class="number">3</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;       ├────┼────┼────┼────┤\n&quot;</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;       └────┴────┴────┴────┘\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      _______________________ \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[Q] Back to menu.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">UpdateMap</span><span class="params">()</span> &#123;</span><br><span class="line">    Goto(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (score &gt; best) best = score;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Score: %6d  Best: %6d\n&quot;</span>, score, best);</span><br><span class="line">    Goto(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            Goto(<span class="number">3</span> + <span class="number">5</span> * j, i * <span class="number">2</span> + <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j])</span><br><span class="line">                PrintNumber(gameMap[i][j]);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;    &quot;</span>);<span class="comment">//4:</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveLeft</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> k = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[i][k]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[i][k] = gameMap[i][j];</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[i][k] != gameMap[i][j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k + <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[i][k + <span class="number">1</span>] = gameMap[i][j];</span><br><span class="line">                        gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">//merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[i][k] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[i][k];</span><br><span class="line">                    k++;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveRight</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> k = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = n - <span class="number">1</span>; j &gt;= <span class="number">1</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[i][k]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[i][k] = gameMap[i][j];</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[i][k] != gameMap[i][j]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k - <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[i][k - <span class="number">1</span>] = gameMap[i][j];</span><br><span class="line">                        gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k--;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">//merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[i][k] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[i][j] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[i][k];</span><br><span class="line">                    k--;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveUp</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> k = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">2</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[j][i]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[k][i]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[k][i] = gameMap[j][i];</span><br><span class="line">                    gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[k][i] != gameMap[j][i]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k + <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[k + <span class="number">1</span>][i] = gameMap[j][i];</span><br><span class="line">                        gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">//merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[k][i] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[k][i];</span><br><span class="line">                    k++;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">MoveDown</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="type">int</span> k = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = n - <span class="number">1</span>; j &gt;= <span class="number">1</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[j][i]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!gameMap[k][i]) &#123;                      <span class="comment">// gameMap[i,k] is empty</span></span><br><span class="line">                    gameMap[k][i] = gameMap[j][i];</span><br><span class="line">                    gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (gameMap[k][i] != gameMap[j][i]) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (k - <span class="number">1</span> != j) &#123;</span><br><span class="line">                        gameMap[k - <span class="number">1</span>][i] = gameMap[j][i];</span><br><span class="line">                        gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    k--;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;                                   <span class="comment">// merge:gameMap[i][k] ==gameMap[i][j]</span></span><br><span class="line">                    gameMap[k][i] &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">                    gameMap[j][i] = <span class="number">0</span>;</span><br><span class="line">                    score += gameMap[k][i];</span><br><span class="line">                    k--;                                   <span class="comment">// the number can&#x27;t be merged again</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * check if the player wins or loses the game.</span></span><br><span class="line"><span class="comment"> * @return 1 if win,-1 if lose, 0 if continue</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">CheckGame</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> count_of_zero = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!gameMap[i][j]) count_of_zero++;</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j] == <span class="number">2048</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;                                 <span class="comment">// win</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">if</span> (count_of_zero)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;                                         <span class="comment">// continue</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">            <span class="keyword">if</span> (gameMap[i][j] == gameMap[i + <span class="number">1</span>][j]</span><br><span class="line">                || gameMap[i][j] == gameMap[i - <span class="number">1</span>][j]</span><br><span class="line">                || gameMap[i][j] == gameMap[i][j + <span class="number">1</span>]</span><br><span class="line">                || gameMap[i][j] == gameMap[i][j - <span class="number">1</span>])</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;                                 <span class="comment">// continue</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;                                            <span class="comment">// lose</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Game</span><span class="params">(<span class="type">int</span> game_type)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (game_type == <span class="number">1</span>) &#123;</span><br><span class="line">        InitGameMap();   <span class="comment">//new game</span></span><br><span class="line">        have_old_game = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> haveMap = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!haveMap) &#123;</span><br><span class="line">            ShowMap();</span><br><span class="line">            haveMap = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            UpdateMap();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> state = CheckGame();</span><br><span class="line">        <span class="keyword">if</span> (CheckGame() == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n              You Win!\n&quot;</span>);</span><br><span class="line">            system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            have_old_game = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (CheckGame() == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n              You Lose!\n&quot;</span>);</span><br><span class="line">            have_old_game = <span class="number">0</span>;</span><br><span class="line">            system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">char</span> type;</span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        type = getch();</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                MoveUp();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                MoveDown();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> LEFT:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">                MoveLeft();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RIGHT:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">                MoveRight();</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;q&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;Q&#x27;</span>:</span><br><span class="line">                haveMap = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="type">int</span> count_of_zero = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</span><br><span class="line">                    <span class="keyword">if</span> (!gameMap[i][j]) count_of_zero++;</span><br><span class="line">            <span class="keyword">if</span> (count_of_zero &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="type">int</span> total = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (total &lt; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="type">int</span> x = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> y = rand() % <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> temp = rand() % <span class="number">6</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="type">int</span> num = <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (temp == <span class="number">1</span>) num = <span class="number">4</span>;</span><br><span class="line">                    <span class="keyword">if</span> (!gameMap[x][y]) &#123;</span><br><span class="line">                        gameMap[x][y] = num;</span><br><span class="line">                        total++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">ShowMenu</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    system(<span class="string">&quot;cls&quot;</span>);</span><br><span class="line">    <span class="type">int</span> print_X = <span class="number">14</span>;</span><br><span class="line">    <span class="comment">/*Goto(16, 3);</span></span><br><span class="line"><span class="comment">    printf(&quot;2 0 4 8\n&quot;);*/</span></span><br><span class="line">    Goto(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       ____   ___  _  _    ___  \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      |___ \\ / _ \\| || |  ( _ ) \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;        __) | | | | || |_ / _ \\ \n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;       / __/| |_| |__   _| (_) |\n&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;      |_____|\\___/   |_|  \\___/ \n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">7</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;1.New Game\n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">8</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;2.Old Game\n&quot;</span>);</span><br><span class="line">    Goto(print_X, <span class="number">9</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;3.Exit\n&quot;</span>);</span><br><span class="line">    Goto(print_X - <span class="number">1</span>, <span class="number">6</span> + x);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">    Goto(<span class="number">3</span>, <span class="number">11</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Please type [UP][DOWN] or [w][s] \nto choose your game.\n   Type [ENTER] to enter the game.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Menu</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> now_point = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> last_point = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> haveMenu = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">char</span> type;</span><br><span class="line">        <span class="type">int</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (!haveMenu) &#123;</span><br><span class="line">            ShowMenu(now_point);</span><br><span class="line">            haveMenu = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Goto(<span class="number">14</span> - <span class="number">1</span>, <span class="number">6</span> + now_point);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;&gt;&quot;</span>);</span><br><span class="line">            Goto(<span class="number">14</span> - <span class="number">1</span>, <span class="number">6</span> + last_point);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        type = getch();</span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                last_point = now_point;</span><br><span class="line">                now_point = (now_point + <span class="number">1</span>) % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">                last_point = now_point;</span><br><span class="line">                now_point = now_point % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> ENTER:</span><br><span class="line">                <span class="keyword">if</span> (now_point &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">                    haveMenu = <span class="number">0</span>;</span><br><span class="line">                    Game(now_point);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>C语言程序设计</tag>
      </tags>
  </entry>
  <entry>
    <title>深度学习笔记（数学基础）</title>
    <url>/2022/10/06/deepLearning/</url>
    <content><![CDATA[<h2 id="神经网络基本原理"><a href="#神经网络基本原理" class="headerlink" title="神经网络基本原理"></a>神经网络基本原理</h2><h3 id="得分函数"><a href="#得分函数" class="headerlink" title="得分函数"></a>得分函数</h3><p>$<br>f(x;W)=Wx=\begin{pmatrix}W_{1}&amp;W_{2}&amp;… &amp;W_{n}\\\end{pmatrix}\begin{pmatrix}x_{1}\\x_{2}\\ … \\x_{n}\end{pmatrix}=\sum^{n}_{i=1}{W_{i}x_{i}}<br>$</p>
<p>$<br>f(x;W)=Wx=\begin{pmatrix}W_{11}&amp;W_{12}&amp;… &amp;W_{1n}\\W_{21}&amp;W_{22}&amp;… &amp;W_{2n}\end{pmatrix}\begin{pmatrix}x_{1}\\x_{2}\\ … \\x_{n}\end{pmatrix}=\begin{pmatrix}Y_{1}\\Y_{2}\end{pmatrix}<br>$</p>
<p>结果的行数表示类别数，<strong>x</strong>向量表示训练数据，W为权重参数</p>
<p>线性函数：$f(x;W)=Wx+b(偏置参数矩阵)$</p>
<blockquote>
<p>如何根据$\begin{pmatrix}Y_{1}\\Y_{2}\\ … \\Y_{m}\end{pmatrix}$求得对应类别的概率？<strong>归一化</strong></p>
<p>$P(Y=k|X=x_{i})=\frac{e^{s_{k}}}{\sum_{j}{e^{s_{j}}}}$</p>
<p>总结：先求<u>指数</u>，再求<u>所占分数</u></p>
</blockquote>
<span id="more"></span>
<h3 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h3><ol>
<li><p>例如，$L_{i}=\sum_{j\neq y_{i}}{max(0,s_{j}-s_{y_{i}} + 1)}$,其中$y_{i}$为正确类别</p>
<p>$L=\frac{1}{N}\sum_{i=1}^{n}\sum_{j\neq y_{i}}max(0,f(x_{i};W)_{j}-f(x_{i};W)_{y_{i}} + 1)+\lambda R(N)$</p>
<p>其中$R(N)$为正则化惩罚项，<strong>$\lambda$增大，会降低过拟合的风险</strong></p>
<p>$R(N)=\sum_{k}\sum_{l}W_{k,l}^{2}$</p>
<p>训练目标：使损失函数L减小</p>
</li>
<li><p>例如，$e=\frac{1}{2}(y-\hat{y})^2$,多样本$E=e^{(1)}+e^{(2)}+…+e^{(n)}=\frac{1}{2}\sum_{i=1}^{n}(y^{(i)}-\hat{y}^{(i)})^2$</p>
<p>其中$\hat{y}^{(i)}=\phi(z^{(i)})=Wx^{(i)}$,$\phi(x)$是线性激活函数</p>
<p>$E=\frac{1}{2}\sum_{i=1}^{n}(y^{(i)}-\hat{y}^{(i)})^2=\frac{1}{2}\sum_{i=1}^{n}(y^{(i)}-Wx^{(i)})^2$</p>
<p>目标：训练合适的W，使差值E取最小值</p>
</li>
</ol>
<h3 id="激活函数（阈值）"><a href="#激活函数（阈值）" class="headerlink" title="激活函数（阈值）"></a>激活函数（阈值）</h3><ol>
<li>Sigmoid函数：$f(z)=\frac{1}{1+e^{-z}}$（缺点：计算时间长）</li>
</ol>
<p><img src="\images\deep1.png" style="zoom:33%;" /></p>
<ol>
<li>ReLu函数：$ReLu(x) = max(0,x)$（优点：计算速度快）</li>
</ol>
<h3 id="梯度下降"><a href="#梯度下降" class="headerlink" title="梯度下降"></a>梯度下降</h3><p>设$W=\begin{pmatrix}<br>w_{1}&amp;w_{2}&amp;… &amp;w_{n}\\<br>\end{pmatrix}$更新权重$w:=w+\Delta w$</p>
<p>$\Delta w=-\eta \nabla J(w)$,其中$\eta$为学习率，表示学习速度（要适中）</p>
<p><img src="\images\deep2.png" style="zoom:50%;" /></p>
<p><img src="\images\deep3.png" style="zoom:50%;" /></p>
<h3 id="多层神经网络"><a href="#多层神经网络" class="headerlink" title="多层神经网络"></a>多层神经网络</h3><p><img src="\images\deep4.png" style="zoom:67%;" /></p>
<ul>
<li><strong>整体架构</strong>：输入层-隐藏层（可以包含多层）-输出层</li>
<li>大于一层的就被称为深度神经网络，层次越多数据处理能力越强</li>
<li>每个连接都有一个权值w</li>
<li>在Hidden Layer增加<strong>神经元</strong>的数量以获取更多特征</li>
</ul>
<p><strong>多层神经网络的训练过程</strong></p>
<blockquote>
<ol>
<li>从输入层开始，将数据经过神经网络传输到输出层，这一步是<strong>前向传播</strong>。</li>
<li>根据输出，计算误差(预测结果和已知结果之间的差异)，得到代价函数。利用梯度下降法最小化误差。</li>
<li>梯度下降法需要计算每个权重的梯度，使用<strong>反向传播</strong>算法计算梯度，根据梯度调整权重值。</li>
</ol>
<p>重复以上3个步骤训练权重参数W。</p>
<p>资料来源：<a href="https://www.qikegu.com/docs/3781">深度学习 – 多层神经网络 | 奇客谷教程 💯 (qikegu.com)</a></p>
</blockquote>
<p><strong>反向传播</strong>：通过链式求导法则求代价函数对各层参数W的偏导数</p>
<h2 id="卷积神经网络"><a href="#卷积神经网络" class="headerlink" title="卷积神经网络"></a>卷积神经网络</h2><p>整体架构：卷积层→Relu层→池化层→连接各层→全连接层</p>
<h3 id="卷积计算"><a href="#卷积计算" class="headerlink" title="卷积计算"></a>卷积计算</h3><p>卷积结果大小计算公式：</p>
<ul>
<li><p>$H_{2}=\frac{H_{1}-F_{H}+2P}{S(步长)}+1$,P为边界填充的圈数</p>
</li>
<li><p>$W_{2}=\frac{W_{1}-F_{W}+2P}{S(步长)}+1$</p>
</li>
</ul>
<h3 id="池化层"><a href="#池化层" class="headerlink" title="池化层"></a>池化层</h3><p><strong>MAXPOOLING</strong>:池化层的目的是压缩</p>
<p>以K*K大小分块，每次取块中最大的元素</p>
<p>$\begin{pmatrix}1&amp;3&amp;2&amp;9\\7&amp;4&amp;1&amp;5&amp;\\8&amp;5&amp;2&amp;3\\4&amp;2&amp;1&amp;4\end{pmatrix}→\begin{pmatrix}7&amp;9\\8&amp;4 \end{pmatrix}$</p>
]]></content>
      <tags>
        <tag>深度学习</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2022/02/23/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>2022科协第一次内训</title>
    <url>/2022/11/18/njuseSAT-1/</url>
    <content><![CDATA[<p>2022年10月30日，软件学院科协赛事部向新成员们举办了第一次内训。在本次内训中，我作为分享人向科协赛事部的成员分享“举办算法比赛”相关的知识和技术，提高成员对算法比赛的兴趣，让成员熟悉云服务器的基本操作。</p>
<p>遗憾的是，由于疫情影响，本次内训活动线上进行。（感觉自己语速还是太快了，前几页PPT因为直播问题卡住了迟迟没有发现，TAT）</p>
<h3 id="活动流程"><a href="#活动流程" class="headerlink" title="活动流程"></a>活动流程</h3><h4 id="第一阶段——关于“如何举办一场算法比赛”的分享"><a href="#第一阶段——关于“如何举办一场算法比赛”的分享" class="headerlink" title="第一阶段——关于“如何举办一场算法比赛”的分享"></a>第一阶段——关于“如何举办一场算法比赛”的分享</h4><ol>
<li><p>介绍常见的算法比赛机制</p>
<p><img src="\images\image-20221118095921835.png" alt="image-20221118095921835" style="zoom:80%;" /></p>
<p><img src="\images\image-20221118095945775.png" alt="image-20221118095945775" style="zoom:80%;" /></p>
</li>
<li><p>介绍如何评测代码</p>
<p><img src="\images\image-20221118095747533.png" alt="image-20221118095747533" style="zoom: 50%;" /></p>
<span id="more"></span>
</li>
<li><p>讲解生成测试用例</p>
<p><img src="\images\image-20221118100008071.png" alt="image-20221118100008071" style="zoom:67%;" /></p>
</li>
<li><p>介绍如何部署UOJ</p>
<p><img src="\images\image-20221118095845579.png" alt="image-20221118095845579" style="zoom: 80%;" /></p>
</li>
<li><p>介绍比赛管理相关要求：报名统计、签到、发奖、成绩统计。</p>
</li>
<li><p>讨论接下来的比赛形式</p>
<p><strong>请期待我们的“C位出道”程序设计与应用大赛！</strong></p>
</li>
</ol>
<h4 id="第二阶段——云服务器基本操作实验"><a href="#第二阶段——云服务器基本操作实验" class="headerlink" title="第二阶段——云服务器基本操作实验"></a>第二阶段——云服务器基本操作实验</h4><p>本实验在分享结束后的一周内进行，每人安排一天的时间,在我们提供的云服务器尝试部署UOJ。</p>
<p>（每天要重装一遍服务器，有两天忘了及时重装~）</p>
<p><strong>实验任务表</strong></p>
<ol>
<li>下载并安装Putty</li>
<li>登录云服务器，熟悉Linux基本操作</li>
<li>阅读《UOJ部署指北》<a href="https://universaloj.github.io/">首页 - UOJ部署指北 (universaloj.github.io)</a>，部署UOJ，并在网页中成功打开</li>
<li>向UOJ中上传一道A+B问题，自行生成5个以上的测试数据</li>
</ol>
<h3 id="活动反馈"><a href="#活动反馈" class="headerlink" title="活动反馈"></a>活动反馈</h3><p>部员全员参加内训，均完成了实验，对docker也有了初步的认识。</p>
<p>（自我感觉这次的选题还不错）</p>
]]></content>
      <tags>
        <tag>学校生活</tag>
      </tags>
  </entry>
  <entry>
    <title>配置online vscode</title>
    <url>/2022/03/20/online-vscode/</url>
    <content><![CDATA[<p>前段时间购入了一台华为Matepad11，真的非常的香。但是对于经常写代码又不想随时背着笔记本电脑的软院学生而言，遗憾的是，平板上并没有好的代码编辑器。</p>
<p>于是，在云服务器上部署一个online代码编辑器的想法诞生了。</p>
<p>本人用的是大一上学期双十一期间购入的腾讯云轻量应用服务器，最近还免费升级到了4核4G，很赞。</p>
<h3 id="利用docker安装online-vscode"><a href="#利用docker安装online-vscode" class="headerlink" title="利用docker安装online vscode"></a>利用docker安装online vscode</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d --name=code-server \</span><br><span class="line">  -e PUID=1000 \</span><br><span class="line">  -e PGID=1000 \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -e PASSWORD= \</span><br><span class="line">  -e SUDO_PASSWORD= \</span><br><span class="line">  -p 8080:8443 \</span><br><span class="line">  -v /path/to/appdata/config:/config \</span><br><span class="line">  -v /root/vscode:/vscode \</span><br><span class="line">  --restart unless-stopped \</span><br><span class="line">  lscr.io/linuxserver/code-server</span><br></pre></td></tr></table></figure>
<h3 id="设置腾讯云防火墙"><a href="#设置腾讯云防火墙" class="headerlink" title="设置腾讯云防火墙"></a>设置腾讯云防火墙</h3><p>启动docker以后还是无法在<code>http:IP地址:8080</code>中访问online vscode, 原因是没有在云服务器的防火墙中添加新的规则，开放端口</p>
<p><img src="/images/image-20220320212651339.png" alt="image-20220320212651339"></p>
<p>现在再次访问<code>http:IP地址:8080</code>就可以跳转到登陆界面了，输入之前PASSWORD设置的密码就可以登陆了。</p>
<span id="more"></span>
<p><img src="/images/image-20220320213047933.png" alt="image-20220320213047933"></p>
<h3 id="安装Gcc、Python"><a href="#安装Gcc、Python" class="headerlink" title="安装Gcc、Python"></a>安装Gcc、Python</h3><p>然而，新建的docker里十分干净，连可怜的gcc都没有，于是开始安装。</p>
<ol>
<li><p>首先先进入docker</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it code-server /bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新源，安装<code>wget</code>、<code>ping</code>、<code>ifconfig</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install wget</span><br><span class="line">apt-get install inetutils-ping</span><br><span class="line">apt-get install net-tools</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装gcc</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get install gcc </span><br></pre></td></tr></table></figure>
</li>
<li><p>安装python</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">apt-get install python3</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>之后顺便安装了<code>jdk</code>,主要就是敲敲指令，就不多赘述了。</p>
<p>现在我得到了一个可以直接在网页访问的、好用的在线IDE了。</p>
<p><img src="/images/image-20220320214141660.png" alt="image-20220320214141660"></p>
]]></content>
      <tags>
        <tag>云服务器学习生活</tag>
      </tags>
  </entry>
  <entry>
    <title>2022年第一次参加高额奖学金答辩</title>
    <url>/2022/09/28/scholarship/</url>
    <content><![CDATA[<p>2022年9月27日，我很高兴也很荣幸能够参加高额奖学金的答辩。感谢学校和同学对我一年学习工作的认可。</p>
<p>在这次答辩中我也真正看到面面俱到的大佬们，无论是党团学习、志愿服务、团学工作、课程成绩、科研创新、社会实践还是技术积累，都取得了很优秀的成绩。</p>
<p>我还得继续努力，多参与活动与比赛，积极向党组织靠拢。</p>
<p>（花旗杯、微信小程序应用开发赛等我得考虑考虑了）</p>
<p><img src="/images/picture1.jpg" alt="picture1"></p>
]]></content>
      <tags>
        <tag>学校生活</tag>
      </tags>
  </entry>
  <entry>
    <title>2023科协第二次MINI内训</title>
    <url>/2023/03/29/njuseSAT-2/</url>
    <content><![CDATA[<h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><p>2023年3月26日，软件学院科协赛事部在EL大赛策划会议后举行了第二次内训。本次内训如愿线下举行，内容轻松愉快，讲述了如何将二进制运用到程序设计之中。算是一次成功的MINI内训。</p>
<h3 id="回顾位运算"><a href="#回顾位运算" class="headerlink" title="回顾位运算"></a>回顾位运算</h3><div class="table-container">
<table>
<thead>
<tr>
<th><strong>符号</strong></th>
<th><strong>描述</strong></th>
<th><strong>运算规则</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;</code></td>
<td>与</td>
<td>两个位都为1时，结果才为1</td>
</tr>
<tr>
<td></td>
<td>或</td>
<td>两个位都为0时，结果才为0</td>
</tr>
<tr>
<td><code>^</code></td>
<td>异或</td>
<td>两个位相同为0，相异为1</td>
</tr>
<tr>
<td><code>~</code></td>
<td>取反</td>
<td>0变1，1变0</td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>左移</td>
<td>各二进位全部左移若干位，高位丢弃，低位补0</td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>右移</td>
<td>各二进位全部右移若干位</td>
</tr>
</tbody>
</table>
</div>
<span id="more"></span>
<h3 id="一些简单的例子"><a href="#一些简单的例子" class="headerlink" title="一些简单的例子"></a>一些简单的例子</h3><ol>
<li><p>用位运算判断一个数是否是奇数</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (x &amp; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;x is odd.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>取出二进制数的倒数第$k$位</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">(x &gt;&gt; (k - <span class="number">1</span>)) &amp; <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将一个<strong>整数</strong>乘以$2^k$</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">x &lt;&lt;= k;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="这仍然是一个easy的问题"><a href="#这仍然是一个easy的问题" class="headerlink" title="这仍然是一个easy的问题"></a>这仍然是一个easy的问题</h3><p> 二进制以字符串的形式描述</p>
<p> （1）将一个二进制数转化为十进制数</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">0</span>; </span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">     num = (num &lt;&lt; <span class="number">1</span>) | (s[i] - <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> （2）将一个十进制数转化为二进制数</p>
<blockquote>
<p>重要思想： 其实数在计算机内本来就是二进制的，所以十进制数转化为二进制数就是依次取出二进制数的倒数第$k$位</p>
</blockquote>
<hr>
<h3 id="快速幂算法"><a href="#快速幂算法" class="headerlink" title="快速幂算法"></a>快速幂算法</h3><p>问题：如何快速求解$x^p$ 或$x^p$ mod r的值</p>
<ul>
<li><p>在$O(n)$的时间内求解这个问题应该不是什么难事</p>
</li>
<li><p>能否在$O(log n)$的时间内求解这个问题</p>
</li>
</ul>
<h4 id="分治思想"><a href="#分治思想" class="headerlink" title="分治思想"></a>分治思想</h4><ul>
<li><p>当p 为偶数时， $n^p = (n^{p/2})^2$</p>
</li>
<li><p>当p 为奇数时呢？ $p -1$ 是偶数</p>
</li>
</ul>
<p>我们可以写<strong>递归</strong>函数解决</p>
<h4 id="二进制分解"><a href="#二进制分解" class="headerlink" title="二进制分解"></a>二进制分解</h4><p> 能否不用递归？</p>
<p> 以求$x^{21}$ 为例：$(21)_{10}=(10101)_2$ </p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>$x^{16}$</th>
<th>$x^{8}$</th>
<th>$x^{4}$</th>
<th>$x^{2}$</th>
<th>$x^{1}$</th>
</tr>
</thead>
<tbody>
<tr>
<td>每一位</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<script type="math/tex; mode=display">
21 = 16 + 4 + 1</script><script type="math/tex; mode=display">
x^{21} = x^{16} * x^4 * x^1</script><p><img src="https://s1.ax1x.com/2023/03/29/ppgA6kn.png" alt="ppgA6kn.png"></p>
<p><strong>Python参考代码</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fast_pow</span>(<span class="params">x, p</span>):</span><br><span class="line">    ans = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> p &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">if</span> p &amp; <span class="number">1</span> == <span class="number">1</span>:</span><br><span class="line">            ans = ans * x</span><br><span class="line">        x = x * x</span><br><span class="line">        p &gt;&gt;= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line">x, p = [<span class="built_in">int</span>(t) <span class="keyword">for</span> t <span class="keyword">in</span> <span class="built_in">input</span>().split()]</span><br><span class="line"><span class="built_in">print</span>(fast_pow(x, p))</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="状态压缩"><a href="#状态压缩" class="headerlink" title="状态压缩"></a>状态压缩</h3><p> <a href="https://www.luogu.com.cn/problem/P2040">P2040 </a><a href="https://www.luogu.com.cn/problem/P2040">打开所有的灯 </a><a href="https://www.luogu.com.cn/problem/P2040">- </a><a href="https://www.luogu.com.cn/problem/P2040">洛谷 </a><a href="https://www.luogu.com.cn/problem/P2040">| </a><a href="https://www.luogu.com.cn/problem/P2040">计算机科学教育新生态 </a><a href="https://www.luogu.com.cn/problem/P2040">(luogu.com.cn)</a></p>
<p> <strong>题目描述</strong></p>
<p> 这个灯很奇怪，点一下就会将这个灯和其周围四盏灯的<strong>开关状态全部改变</strong>。现在你的任务就是就是求要打开全部这些灯最少需要点几下。</p>
<p>例如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0  1  1</span><br><span class="line">1  0  0</span><br><span class="line">1  0  1</span><br></pre></td></tr></table></figure>
<p>点一下最中间的灯【2,2】就变成了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">0  0  1</span><br><span class="line">0  1  1</span><br><span class="line">1  1  1</span><br></pre></td></tr></table></figure>
<p>再点一下左上角的灯【1,1】就变成了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1  1  1</span><br><span class="line">1  1  1</span><br><span class="line">1  1  1</span><br></pre></td></tr></table></figure>
<p>达成目标。最少需要2步。</p>
<h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p><del>像极了洛克王国打幽系徽章玩的小游戏</del></p>
<ul>
<li>一个灯点1次和点3的效果是一样的</li>
<li>那么我们是不是可以<strong>枚举</strong>每个灯的状态</li>
<li>每个灯就是一个0或者1</li>
<li>可以用<strong>9位的二进制数（0~511）</strong>描述所有操作组合</li>
</ul>
<p><strong>C语言参考代码</strong></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdbool.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a[<span class="number">5</span>][<span class="number">5</span>], b[<span class="number">5</span>][<span class="number">5</span>];</span><br><span class="line"><span class="type">int</span> ans = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">check</span><span class="params">()</span> &#123; <span class="comment">// 检查灯是否已经全部打开</span></span><br><span class="line">    <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span> ;i &lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">3</span>; j++) &#123;</span><br><span class="line">            sum += b[i][j];</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (sum == <span class="number">9</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>;i &lt;= <span class="number">3</span>;i++)</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">1</span>;j &lt;= <span class="number">3</span>;j++)</span><br><span class="line">          <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;a[i][j]);</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; (<span class="number">1</span> &lt;&lt; <span class="number">9</span>); i++) &#123;      <span class="comment">// 从0 ~ 2 ^ 9 - 1枚举</span></span><br><span class="line">  	  <span class="type">int</span> j = i;  </span><br><span class="line">      <span class="type">int</span> count = <span class="number">0</span>;   </span><br><span class="line">	  <span class="type">int</span> t = <span class="number">0</span>;  </span><br><span class="line">      <span class="built_in">memcpy</span>(b, a, <span class="keyword">sizeof</span>(a));             <span class="comment">// 复制一份数组</span></span><br><span class="line">	  <span class="keyword">while</span>(j) &#123;  </span><br><span class="line">    	  t++;  </span><br><span class="line">    	  <span class="keyword">if</span>(j &amp; <span class="number">1</span>) &#123;  </span><br><span class="line">    	      count++;  </span><br><span class="line">    	      <span class="type">int</span> x = (t - <span class="number">1</span>) / <span class="number">3</span> + <span class="number">1</span>; 		   <span class="comment">// 行</span></span><br><span class="line">	    	  <span class="type">int</span> y = (t - <span class="number">1</span>) % <span class="number">3</span> + <span class="number">1</span>; 		   <span class="comment">// 列</span></span><br><span class="line">	    	  b[x][y] = b[x][y] ^ <span class="number">1</span>;       <span class="comment">// 改变自己和周围灯的状态</span></span><br><span class="line">	    	  b[x + <span class="number">1</span>][y] = b[x + <span class="number">1</span>][y] ^ <span class="number">1</span>;</span><br><span class="line">	    	  b[x - <span class="number">1</span>][y] = b[x - <span class="number">1</span>][y] ^ <span class="number">1</span>;</span><br><span class="line">	    	  b[x][y - <span class="number">1</span>] = b[x][y - <span class="number">1</span>] ^ <span class="number">1</span>;</span><br><span class="line">	    	  b[x][y + <span class="number">1</span>] = b[x][y + <span class="number">1</span>] ^ <span class="number">1</span>;</span><br><span class="line">	      &#125;</span><br><span class="line">	      j &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">	  &#125;</span><br><span class="line">	  <span class="keyword">if</span>(check()) &#123; ans= count &lt; ans? count: ans;&#125;  <span class="comment">// 更新答案</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ans);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注：这段代码在3*3的棋盘外面加上了“一层壳”，有效避免了边界的特别处理</p>
<h3 id="改进"><a href="#改进" class="headerlink" title="改进"></a>改进</h3><p>使用了Web CodeServer现场演示，PPT和内容存在网页中，可以在教室电脑上直接运行，无需投影/配环境</p>
]]></content>
      <tags>
        <tag>学校生活</tag>
      </tags>
  </entry>
  <entry>
    <title>C语言嵌入汇编代码</title>
    <url>/2023/04/19/asm-C/</url>
    <content><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>在靠近底层方面的编程，C语言具有Java、Python都不具有的优势——直接操作内存。即使这样，仍然有一些操作需要“汇编代码”的帮助，例如对具体寄存器的操作，实现指令的原子性等。因此，C和汇编的混合编程在实际程序中很重要（也成为了C语言项目移植的难题）。</p>
<blockquote>
<p><strong>参考文章</strong></p>
<p><a href="https://zhuanlan.zhihu.com/p/362897071#:~:text=C 代码中嵌入汇编 而 C 中嵌入汇编代码由 gcc,编译器实现的，实现也非常简单，使用由编译器提供的 asm 或者 __asm__ 关键字即可%2C这两者没有任何区别，然后将需要执行的汇编指令使用 (&quot;&quot;">arm 嵌入汇编 - 知乎 (zhihu.com)</a>包含起来即可，对应的汇编指令就会被执行。)</p>
<p><a href="https://blog.csdn.net/zacklin/article/details/7445442">(34条消息) 原子操作与 x86 上的 lock 指令前缀_x86 lock前缀_zacklin的博客-CSDN博客</a></p>
<p><a href="https://jyywiki.cn/OS/2023/build/lect6.ipynb">6. 并发控制基础 (jyywiki.cn)</a></p>
</blockquote>
<h2 id="C语言嵌入汇编代码"><a href="#C语言嵌入汇编代码" class="headerlink" title="C语言嵌入汇编代码"></a>C语言嵌入汇编代码</h2><h3 id="asm代码"><a href="#asm代码" class="headerlink" title="asm代码"></a>asm代码</h3><p>在C语言中嵌入汇编代码由gcc编译器实现，gcc提供了<code>asm</code>和<code>__asm__</code>关键字，<code>asm</code>是<code>__asm__</code>的别名。最简单的使用方法：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">asm</span>(<span class="string">&quot;mov r1, r2&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>上面的代码实现了将寄存器r2的值复制给寄存器r1</p>
<p>然而，寄存器r1, r2可能已经被使用，我们需要更安全、更有意义地使用汇编语言。</p>
<span id="more"></span>
<p>例如将变量val2的值赋值给val1：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">func</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="type">int</span> val1 = <span class="number">3</span>, val2 = <span class="number">5</span>;</span><br><span class="line">	<span class="keyword">asm</span>(<span class="string">&quot;mov %0, %1&quot;</span></span><br><span class="line">		: <span class="string">&quot;=r&quot;</span>(val1)</span><br><span class="line">		: <span class="string">&quot;r&quot;</span>(val2)</span><br><span class="line">		:);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;val1 = %d\n&quot;</span>, val1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>指令分为<strong>四个部分</strong>：</p>
<ul>
<li>汇编操作代码：多条指令需要在指令间使用<code>\n\t</code> 隔开。使用第二和第三部分提供的操作数时，使用<code>%n</code>来代替操作数：<code>%0</code>表示输入输出列表中的<strong>第一个操作数</strong>，以此类推。</li>
<li><p>输出操作数列表：输出的操作数，一般为C语言中的变量，多个用<code>,</code>隔开。</p>
</li>
<li><p>输入操作数列表：输入的操作数，一般为C语言中的变量必须提供表示操作数的属性如<code>&quot;r&quot;</code></p>
</li>
<li><p>被破坏的列表，避免C语言代码和汇编代码访问同一个寄存器，编译器会对数据进行保存。例如：<code>asm(&quot;mov lr,#1&quot;:::&quot;lr&quot;);</code></p>
<ul>
<li><blockquote>
<p>两个特殊的参数：<strong>“cc”</strong> 对应的并非是普通寄存器，而是 CPU 的状态寄存器，如果某些指令将状态寄存器修改了，需要在 clobber list 中添加 “cc” 来声明这个事情。</p>
<p><strong>“memory”</strong> 对应内存操作，这从名称也可以看出，当 clobber list 中包含 “memory” 时，表示嵌入汇编代码会对内存进行一些操作，gcc 生成的代码会将特定的寄存器的值写回到内存中以保证内存中的值是最新的，这样做的原因是 gcc 经常会将内存数据缓存在寄存器中，如果不及时写回，嵌入汇编代码读到的内存就是原来的值</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="操作数属性"><a href="#操作数属性" class="headerlink" title="操作数属性"></a>操作数属性</h3><p>对于输出操作数</p>
<ul>
<li><code>&quot;=&quot;</code> 表示只写，通常用于所有输出操作数的属性</li>
<li><code>&quot;+&quot;</code>表示读写，只能被列为输出操作数的属性，否则编译会报错</li>
</ul>
<p>常用属性：<code>&quot;r&quot;</code>表示通用寄存器，<code>&quot;f&quot;</code>表示浮点寄存器，<code>&quot;m&quot;</code>表示内存地址空间</p>
<h3 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h3><p>volatile关键字用于避免编译器对程序和数据进行优化</p>
<p>编译器可能自作主张地认为没有输出的语句可以删除，或者认为两条语句的顺序可以交换</p>
<p>对于 CPU 内部状态寄存器的操作，就不会有输入输出，通常都会加上</p>
<h3 id="并发代码案例sum-c"><a href="#并发代码案例sum-c" class="headerlink" title="并发代码案例sum.c"></a>并发代码案例sum.c</h3><p>使用了南京大学jyy老师的课堂代码，<strong>线程库thread.h见“附录”</strong></p>
<p>因为<code>sum++;</code>不是原子指令，所以下面的代码有并发问题(sum.c)：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;thread.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100000000</span></span><br><span class="line"></span><br><span class="line"><span class="type">long</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Tsum</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">    sum++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">  create(Tsum);</span><br><span class="line">  create(Tsum);</span><br><span class="line">  join();</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;sum = %ld\n&quot;</span>, sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gcc sum.c -lpthread</span><br></pre></td></tr></table></figure>
<p>运行程序产生的结果：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ./a.out</span><br><span class="line"><span class="built_in">sum</span> = 113467324</span><br><span class="line">$ ./a.out</span><br><span class="line"><span class="built_in">sum</span> = 123753811</span><br></pre></td></tr></table></figure>
<p>使用嵌入汇编代码实现原子性(sum-atomic.c)：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;thread.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100000000</span></span><br><span class="line"></span><br><span class="line"><span class="type">long</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">atomic_inc</span><span class="params">(<span class="type">long</span> *ptr)</span> &#123;</span><br><span class="line">  <span class="keyword">asm</span> <span class="title function_">volatile</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="string">&quot;lock incq %0&quot;</span>  <span class="comment">// Atomic + memory fence</span></span></span><br><span class="line"><span class="params">    : <span class="string">&quot;+m&quot;</span>(*ptr)</span></span><br><span class="line"><span class="params">    :</span></span><br><span class="line"><span class="params">    : <span class="string">&quot;memory&quot;</span></span></span><br><span class="line"><span class="params">  )</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Tsum</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">    <span class="type">atomic_inc</span>(&amp;sum);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">  create(Tsum);</span><br><span class="line">  create(Tsum);</span><br><span class="line">  join();</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">&quot;sum = %ld\n&quot;</span>, sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注：lock 指令前缀能确保在多处理器系统或多线程竞争的环境下互斥地使用这个内存地址</p>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p>jyy线程库thread.h</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdatomic.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NTHREAD 64</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> &#123;</span> T_FREE = <span class="number">0</span>, T_LIVE, T_DEAD, &#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">thread</span> &#123;</span></span><br><span class="line">  <span class="type">int</span> id, status;</span><br><span class="line">  <span class="type">pthread_t</span> thread;</span><br><span class="line">  <span class="type">void</span> (*entry)(<span class="type">int</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">thread</span> <span class="title">tpool</span>[<span class="title">NTHREAD</span>], *<span class="title">tptr</span> =</span> tpool;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">wrapper</span><span class="params">(<span class="type">void</span> *arg)</span> &#123;</span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">thread</span> *<span class="title">thread</span> =</span> (<span class="keyword">struct</span> thread *)arg;</span><br><span class="line">  thread-&gt;entry(thread-&gt;id);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">create</span><span class="params">(<span class="type">void</span> *fn)</span> &#123;</span><br><span class="line">  assert(tptr - tpool &lt; NTHREAD);</span><br><span class="line">  *tptr = (<span class="keyword">struct</span> thread) &#123;</span><br><span class="line">    .id = tptr - tpool + <span class="number">1</span>,</span><br><span class="line">    .status = T_LIVE,</span><br><span class="line">    .entry = fn,</span><br><span class="line">  &#125;;</span><br><span class="line">  pthread_create(&amp;(tptr-&gt;thread), <span class="literal">NULL</span>, wrapper, tptr);</span><br><span class="line">  ++tptr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">join</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; NTHREAD; i++) &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">thread</span> *<span class="title">t</span> =</span> &amp;tpool[i];</span><br><span class="line">    <span class="keyword">if</span> (t-&gt;status == T_LIVE) &#123;</span><br><span class="line">      pthread_join(t-&gt;thread, <span class="literal">NULL</span>);</span><br><span class="line">      t-&gt;status = T_DEAD;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">__attribute__((destructor)) <span class="type">void</span> <span class="title function_">cleanup</span><span class="params">()</span> &#123;</span><br><span class="line">  join();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>C语言程序设计</tag>
      </tags>
  </entry>
  <entry>
    <title>操作系统实验lab3</title>
    <url>/2023/05/19/SEOS-lab3/</url>
    <content><![CDATA[<h2 id="操作系统实验lab3"><a href="#操作系统实验lab3" class="headerlink" title="操作系统实验lab3"></a>操作系统实验lab3</h2><blockquote>
<p>本实验为南京大学软件学院操作系统课程第三次实验，本文是实验完成后的回顾总结，也可作为本实验的指南。</p>
</blockquote>
<h3 id="实验要求"><a href="#实验要求" class="headerlink" title="实验要求"></a>实验要求</h3><p>在<strong>nasm + bochs</strong>平台上完成一个<strong>接受键盘输入，回显到屏幕上</strong>的程序</p>
<h4 id="功能要求"><a href="#功能要求" class="headerlink" title="功能要求"></a>功能要求</h4><p><strong>基本功能</strong></p>
<ol>
<li>从屏幕左上角开始，以白色显示键盘输入的字符。可以输入并显示 <strong>a-z,A-Z</strong> 和</li>
</ol>
<p><strong>0-9</strong> 字符。</p>
<ol>
<li><p><strong>大小写切换</strong>包括 Shift 组合键以及大写锁定两种方式。大写锁定后再用 Shift组合键将会输入小写字母</p>
</li>
<li><p>支持回车键<strong>换行</strong>。</p>
</li>
<li><p>支持用退格键<strong>删除输入内容</strong>。</p>
</li>
<li><p>支持<strong>空格键</strong>和 <strong>Tab 键</strong>（4 个空格，可以被统一的删除）</p>
</li>
<li><p>每隔 20 秒左右, <strong>清空屏幕</strong>。输入的字符重新从屏幕左上角开始显示。</p>
</li>
<li><p>要求有<strong>光标显示</strong>, 闪烁与否均可, 但⼀定要跟随输入字符的位置变化。</p>
</li>
<li><p>不要求支持屏幕滚动翻页，但输入字符数不应有上限。</p>
</li>
<li><p>不要求支持方向键移动光标。</p>
</li>
</ol>
<span id="more"></span>
<p><strong>查找功能</strong></p>
<ol>
<li><p>按 Esc 键<strong>进入查找模式</strong>，在查找模式中不会清空屏幕。</p>
</li>
<li><p>查找模式<strong>输入关键字</strong>，被输入的关键字以红色显示</p>
</li>
<li><p>按回车后，所有<strong>匹配的文本</strong> (区分大小写) 以红色显示，并屏蔽除 Esc 之外</p>
</li>
</ol>
<p>任何输入。4. 再按<code>Esc</code>键，之前输入的关键字被<strong>自动删除</strong>，所有文本恢复白颜色, 光标回到正确位置。参见示例。</p>
<h4 id="附加题"><a href="#附加题" class="headerlink" title="附加题"></a>附加题</h4><p>按下 Ctrl + z 组合键可以<strong>撤回操作</strong>（包含回车和 Tab 和删除），直到初始状态。</p>
<h4 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h4><ul>
<li><p>使用 <strong>make 构建</strong>整个项目，程序必须进入到保护模式下完成。</p>
</li>
<li><p>提交<strong>代码</strong>（包含 makefile）和<strong>运行截图</strong>，其中 makefile 必须支持<code>make run</code> 命令，即在 shell 中进入代码文件所在目录，输入<code>make run</code>并回车可<strong>直接启动程序</strong>，不需要其他命令。</p>
</li>
</ul>
<h3 id="具体实验"><a href="#具体实验" class="headerlink" title="具体实验"></a>具体实验</h3><h4 id="运行书上框架代码"><a href="#运行书上框架代码" class="headerlink" title="运行书上框架代码"></a>运行书上框架代码</h4><p>本次实验可以使用《orange’s 一个操作系统的实现》书附录光盘代码，在其基础上修改实现，所以第一步是将光盘中的代码跑起来，光盘中的代码可以从Github中下载，运行<code>chapter7/n</code>中的代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make image</span><br><span class="line">bochs -f bochsrc</span><br></pre></td></tr></table></figure>
<blockquote>
<p>运行程序时可能会出现一些错误，需要根据<strong>bochs版本进行调整</strong>，或是要<strong>安装图形库</strong>。</p>
</blockquote>
<p>为了实现支持<code>make run</code>命令，我们需要修改Makefile文件，添加以下代码：</p>
<figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">run : image</span><br><span class="line">	bochs -f bochsrc</span><br></pre></td></tr></table></figure>
<p>现在，完成了实验的第一步，我们发现框架代码中已经实现了输入字符、大小写切换、换行、退格键删除等功能，下面需要我们继续完善。</p>
<h4 id="实现初始清屏"><a href="#实现初始清屏" class="headerlink" title="实现初始清屏"></a>实现初始清屏</h4><p>为了实现从屏幕左上角开始，以白色显示键盘输入的字符，需要在初始化之前将整个屏幕打印满空格，然后把显存指针重置为0</p>
<p>在<code>main.c</code>中加入以下方法，并在进入<code>kernel_main</code>函数时调用该方法</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">CleanScreen</span><span class="params">()</span>&#123;</span><br><span class="line">	disp_pos = <span class="number">0</span>; <span class="comment">// 显存指针</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span> ; i &lt; SCREEN_SIZE; i++)&#123;</span><br><span class="line">		disp_str(<span class="string">&quot; &quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	disp_pos = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="实现tab和回车键"><a href="#实现tab和回车键" class="headerlink" title="实现tab和回车键"></a>实现tab和回车键</h4><p>首先，我们需要<strong>阅读框架代码</strong>中已有的回车实现和空格实现。</p>
<p><strong>注意</strong>：虽然框架代码中已经提供了回车换行的实现，但在该实现中，无法做到删除换行时回到上一行（它会一个一个空格删除）。</p>
<p>在<code>tty.c</code>中的<code>in_process</code>中识别当前按下的键，并做出相应的处理；在<code>console.c</code>中的<code>out_char</code>函数中实现对具体字符的输出。要实现tab，实际上就是输出4个空格。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// tty.c</span></span><br><span class="line"><span class="keyword">case</span> TAB:</span><br><span class="line">    put_key(p_tty, <span class="string">&#x27;\t&#x27;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
<p><code>console.c</code>:(根据实验要求，<code>TAB_WIDTH</code>是为4的常量)</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (p_con-&gt;cursor &lt;</span><br><span class="line">    p_con-&gt;original_addr + p_con-&gt;v_mem_limit - TAB_WIDTH) &#123;</span><br><span class="line">    PushIntoCursorStack(&amp;(p_con-&gt;cursorStack), p_con-&gt;cursor);</span><br><span class="line">    <span class="comment">// 记录光标的位置，用于实现整体删除操作，之后会用到</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; TAB_WIDTH; i++) &#123;</span><br><span class="line">        *p_vmem++ = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        *p_vmem++ = DEFAULT_CHAR_COLOR;</span><br><span class="line">        <span class="comment">// 一个位置是字符，一个位置是颜色</span></span><br><span class="line">    &#125;</span><br><span class="line">    p_con-&gt;cursor += TAB_WIDTH;</span><br><span class="line">    PushIntoRecordStack(&amp;(p_con-&gt;recordStack), INSERT_TY, ch);</span><br><span class="line">    <span class="comment">// 用于撤销操作，之后会用到</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
<p>现在，我们实现了tab和回车的输入，但是它们不能被整体地删除。</p>
<p>一个较为简单解决的方法是，用一个<strong>栈</strong>记录每次输入的位置，删除时取出上一次光标的位置。</p>
<p><strong>具体步骤：</strong></p>
<ol>
<li><p>在console.h的<code>struct s_console</code>的定义中加入<code>CursorStack cursorStack;</code>，需要自己设计栈需要保存的内容，并添加入栈、出栈等基本方法。注意要在init_screen中初始化栈。</p>
</li>
<li><p>修改<code>out_char</code>方法，在改变cursor之前将当前的cursor压入栈内，退格时使用pop获取之前的cursor值。</p>
</li>
</ol>
<h4 id="实现定时清屏"><a href="#实现定时清屏" class="headerlink" title="实现定时清屏"></a>实现定时清屏</h4><p>这个功能是独立于其他的功能的，我们需要一个新的进程，在global.c中添加一个<strong>TASK</strong>：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PUBLIC	TASK	task_table[NR_TASKS] = &#123;</span><br><span class="line">	&#123;task_tty, STACK_SIZE_TTY, <span class="string">&quot;tty&quot;</span>&#125;, </span><br><span class="line">    &#123;TimeClear, STACK_SIZE_TIMECLEAR, <span class="string">&quot;TimeClear&quot;</span>&#125;&#125;;</span><br></pre></td></tr></table></figure>
<p>注意，这里要修改宏定义<code>proc.h</code>中的<code>NR_TASKS</code>:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> NR_TASKS   2</span></span><br></pre></td></tr></table></figure>
<p>接下来在main.c中添加一个函数（<code>mode</code>是全局变量，在这里用于控制查找模式不用清屏，可暂时不管它）：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">TimeClear</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(mode == NORMAL_MODE) &#123;</span><br><span class="line">            ClearScreen();</span><br><span class="line">            init_all_tty();</span><br><span class="line">            milli_delay(<span class="number">250000</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            milli_delay(<span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>init_all_tty</code>是在tty.c中添加的函数，用于初始化screen，实现光标复位</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">init_all_tty</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">for</span> (TTY * p_tty = TTY_FIRST; p_tty &lt; TTY_END; p_tty++) &#123;</span><br><span class="line">		init_tty(p_tty);</span><br><span class="line">	&#125;</span><br><span class="line">	select_console(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到这里，清屏的任务就完成了</p>
<h4 id="实现查找功能"><a href="#实现查找功能" class="headerlink" title="实现查找功能"></a>实现查找功能</h4><h5 id="模式切换"><a href="#模式切换" class="headerlink" title="模式切换"></a>模式切换</h5><p>为了区分两个模式（普通模式和查找模式），我们在global.c中定义了一个全局变量<code>mode</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// global.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NORMAL_MODE 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FIND_MODE 1</span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">int</span> mode;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// global.c</span></span><br><span class="line"><span class="type">int</span> mode;</span><br></pre></td></tr></table></figure>
<p>我们需要在按下ESC键的时候切换模式，在tty.c的<code>in_process</code>函数中处理</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// global.h</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> change_mode(x) ((x) ^ 1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// tty.c</span></span><br><span class="line"><span class="keyword">case</span> ESC:</span><br><span class="line">    mode = change_mode(mode);</span><br><span class="line">    <span class="keyword">if</span>(mode == NORMAL_MODE) &#123;</span><br><span class="line">        exit_search_mode(p_tty-&gt;p_console);</span><br><span class="line">        g_shield = <span class="number">0</span>;  <span class="comment">// 输入屏蔽全局变量，之后会提</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        EnterFindMode(p_tty-&gt;p_console);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure>
<p>下面修改console.c中输出字符的函数(<code>out_char</code>函数default分支)，将字符颜色从默认颜色改为分情况讨论：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(mode==<span class="number">0</span>)&#123;</span><br><span class="line">    *p_vmem++ = DEFAULT_CHAR_COLOR;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    *p_vmem++ = RED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你需要在<code>struct s_console</code>中保存进入查找模式时的光标位置，以实现光标复位。具体方法是把当前的cursor到保存的cursor之间的显存全部置为空格和<code>DEFAULT_CHAR_COLOR</code>，然后复位指针，将保存的cursor值赋值给cursor。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PUBLIC <span class="type">void</span> <span class="title function_">exit_search_mode</span><span class="params">(CONSOLE* p_con)</span> &#123;</span><br><span class="line">    u8* p_vmem = (u8*)(V_MEM_BASE + p_con-&gt;cursor * <span class="number">2</span>);</span><br><span class="line">    <span class="type">int</span> sm_input_length = p_con-&gt;cursor - p_con-&gt;start_pos;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= sm_input_length; i++) &#123;</span><br><span class="line">        *(p_vmem - <span class="number">2</span> * i) = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        *(p_vmem - <span class="number">2</span> * i + <span class="number">1</span>) = DEFAULT_CHAR_COLOR;</span><br><span class="line">    &#125;</span><br><span class="line">    p_con-&gt;cursor = p_con-&gt;start_pos;</span><br><span class="line">    p_con-&gt;cursorStack.top = p_con-&gt;cursorStack.search_mode_top;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Set all characters to default color</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; p_con-&gt;start_pos; i++) &#123;</span><br><span class="line">        *(u8*)(V_MEM_BASE + <span class="number">2</span> * i + <span class="number">1</span>) = DEFAULT_CHAR_COLOR; </span><br><span class="line">    &#125;</span><br><span class="line">    flush(p_con);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="查找功能"><a href="#查找功能" class="headerlink" title="查找功能"></a>查找功能</h5><p>字符串匹配可以用KMP算法，但这里选择更为简单的直接匹配，将匹配到的字符改变颜色：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PRIVATE u8 <span class="title function_">getFindChar</span><span class="params">(CONSOLE* p_con, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> *((u8*)(V_MEM_BASE + p_con-&gt;start_pos * <span class="number">2</span> + i * <span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PRIVATE u8 <span class="title function_">getCurChar</span><span class="params">(CONSOLE* p_con, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> *((u8*)(V_MEM_BASE + i * <span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PUBLIC <span class="type">void</span> <span class="title function_">find</span><span class="params">(CONSOLE* p_con)</span> &#123;</span><br><span class="line">    <span class="type">int</span> len = p_con-&gt;cursor - p_con-&gt;start_pos;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; p_con-&gt;start_pos ; i++) &#123;</span><br><span class="line">        <span class="type">int</span> left = i;</span><br><span class="line">        <span class="type">int</span> isMapped = <span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(; j &lt; len &amp;&amp; i + j &lt; p_con-&gt;start_pos; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(getCurChar(p_con, i + j) != getFindChar(p_con, j)) &#123;</span><br><span class="line">                isMapped = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(isMapped &amp;&amp; j == len) &#123;</span><br><span class="line">            <span class="type">int</span> right = left + len - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k = left; k &lt;= right; k++) &#123;</span><br><span class="line">                *((u8*)(V_MEM_BASE + <span class="number">2</span> * k + <span class="number">1</span>)) = RED;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面修改<code>in_process()</code>的<code>ENTER</code>分支，代码略。</p>
<p>为了实现在查找模式中屏蔽除ESC外的输入，我们新建了一个输入屏蔽全局变量<code>g_shield</code>，这里不多介绍。至此我们已经完成了基本功能。</p>
<h4 id="实现撤销"><a href="#实现撤销" class="headerlink" title="实现撤销"></a>实现撤销</h4><p>首先需要识别Ctrl+z/Z的组合键，在keyboard.c中添加以下方法：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">PUBLIC <span class="type">int</span> <span class="title function_">getCtrlStat</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> ctrl_l || ctrl_r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在out_char函数中添加对撤销的识别：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">&#x27;z&#x27;</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;Z&#x27;</span>:</span><br><span class="line">    <span class="keyword">if</span>(getCtrlStat()) &#123;</span><br><span class="line">        isRevoke = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 撤销的具体代码</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// No break</span></span><br></pre></td></tr></table></figure>
<p>怎么实现撤销功能呢，我们需要一个栈（叫线性表会更为准确，因为不止在栈顶操作），记录每一次的操作，包括操作类型（插入/删除）和对应的字符。</p>
<ul>
<li><p>对插入的撤销：执行一次删除</p>
</li>
<li><p>对删除的撤销：执行对应的插入</p>
</li>
</ul>
<p>这里同样要注意tab、回车等特殊字符</p>
<p>注意连续的撤销删除，需要在栈中<strong>找到对应的被删的字符</strong></p>
<p>具体代码：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// console.h</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">record_stack</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> top;</span><br><span class="line">    <span class="type">int</span> types[CURSOR_STACK_SIZE];</span><br><span class="line">    u8  chars[CURSOR_STACK_SIZE];</span><br><span class="line">&#125; RecordStack;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* CONSOLE */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">s_console</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span>	current_start_addr;	<span class="comment">/* 当前显示到了什么位置	  */</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span>	original_addr;		<span class="comment">/* 当前控制台对应显存位置 */</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span>	v_mem_limit;		<span class="comment">/* 当前控制台占的显存大小 */</span></span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span>	cursor;			<span class="comment">/* 当前光标位置 */</span></span><br><span class="line">    CursorStack cursorStack;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> start_pos;</span><br><span class="line">    RecordStack recordStack;</span><br><span class="line">&#125;CONSOLE;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// console.c </span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">&#x27;z&#x27;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;Z&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span>(getCtrlStat()) &#123;</span><br><span class="line">            isRevoke = <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> lastType = GetTopType(&amp;(p_con-&gt;recordStack));</span><br><span class="line">            <span class="keyword">if</span>(lastType == INSERT_TY) &#123;</span><br><span class="line">                <span class="keyword">if</span> (p_con-&gt;cursor &gt; p_con-&gt;original_addr) &#123;</span><br><span class="line">                    <span class="type">int</span> lastPos = PopCursorStack(&amp;(p_con-&gt;cursorStack));</span><br><span class="line">                    <span class="type">int</span> deleteNum = p_con-&gt;cursor - lastPos;</span><br><span class="line">                    p_con-&gt;cursor = lastPos;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= deleteNum; i++) &#123;</span><br><span class="line">			            *(p_vmem<span class="number">-2</span>) = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">			            *(p_vmem<span class="number">-1</span>) = DEFAULT_CHAR_COLOR;</span><br><span class="line">                        p_vmem -= <span class="number">2</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">		        &#125;</span><br><span class="line">                PopRecordStack(&amp;(p_con-&gt;recordStack));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// DELETE_TYPE</span></span><br><span class="line">                <span class="type">char</span> cha = GetTopChar(&amp;(p_con-&gt;recordStack));</span><br><span class="line">                <span class="keyword">switch</span> (cha) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;\n&#x27;</span>:</span><br><span class="line">                    <span class="keyword">if</span> (p_con-&gt;cursor &lt; p_con-&gt;original_addr +</span><br><span class="line">		                p_con-&gt;v_mem_limit - SCREEN_WIDTH) &#123;</span><br><span class="line">                        PushIntoCursorStack(&amp;(p_con-&gt;cursorStack), p_con-&gt;cursor);</span><br><span class="line">			            p_con-&gt;cursor = p_con-&gt;original_addr + SCREEN_WIDTH * </span><br><span class="line">			            	((p_con-&gt;cursor - p_con-&gt;original_addr) /</span><br><span class="line">			            	 SCREEN_WIDTH + <span class="number">1</span>);</span><br><span class="line">		            &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&#x27;\t&#x27;</span>:</span><br><span class="line">                    <span class="keyword">if</span> (p_con-&gt;cursor &lt;</span><br><span class="line">                        p_con-&gt;original_addr + p_con-&gt;v_mem_limit - TAB_WIDTH) &#123;</span><br><span class="line">                            PushIntoCursorStack(&amp;(p_con-&gt;cursorStack), p_con-&gt;cursor);</span><br><span class="line">                            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; TAB_WIDTH; i++) &#123;</span><br><span class="line">                                *p_vmem++ = <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">                                *p_vmem++ = DEFAULT_CHAR_COLOR;</span><br><span class="line">                            &#125;</span><br><span class="line">                            p_con-&gt;cursor += TAB_WIDTH;</span><br><span class="line">                        &#125;                    </span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">if</span> (p_con-&gt;cursor &lt;</span><br><span class="line">		                p_con-&gt;original_addr + p_con-&gt;v_mem_limit - <span class="number">1</span>) &#123;</span><br><span class="line">                        PushIntoCursorStack(&amp;(p_con-&gt;cursorStack), p_con-&gt;cursor);</span><br><span class="line">			            *p_vmem++ = cha;</span><br><span class="line">                        <span class="keyword">if</span> (mode == NORMAL_MODE) &#123;</span><br><span class="line">                           *p_vmem++ = DEFAULT_CHAR_COLOR; </span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                           *p_vmem++ = RED; </span><br><span class="line">                        &#125;</span><br><span class="line">			            p_con-&gt;cursor++;</span><br><span class="line">		            &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                PopRecordStack(&amp;(p_con-&gt;recordStack));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// No break</span></span><br></pre></td></tr></table></figure>
<p>完成lab3，撒花</p>
]]></content>
      <tags>
        <tag>操作系统</tag>
      </tags>
  </entry>
  <entry>
    <title>Java编程规范</title>
    <url>/2023/07/16/javaRules/</url>
    <content><![CDATA[<h3 id="基本语句"><a href="#基本语句" class="headerlink" title="基本语句"></a>基本语句</h3><ol>
<li>switch语句要有default分支，除非switch的条件变量是枚举类型</li>
<li>if-else if类型的条件判断，最后应包含一个else分支</li>
<li>不能用浮点数作为循环变量</li>
</ol>
<h3 id="类的使用"><a href="#类的使用" class="headerlink" title="类的使用"></a>类的使用</h3><h4 id="覆写时要加上-override注解"><a href="#覆写时要加上-override注解" class="headerlink" title="覆写时要加上@override注解"></a>覆写时要加上@override注解</h4><p>原因：</p>
<ul>
<li>如果覆写时因为疏忽，导致子类方法的参数同父类不一致，<strong>编译时会报错</strong>，使问题在<strong>编译期</strong>就被发现。</li>
<li>如果父类修改了方法的定义造成子类不再覆写父类方法，也能使问题在<strong>编译期</strong>尽早被发现。</li>
</ul>
<p>未使用<code>@override</code>注解可能难以发现的错误：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Vehicle is running&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子类编写方法覆写父类方法</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">rum</span><span class="params">()</span> &#123;  <span class="comment">// 方法名不正确</span></span><br><span class="line">    System.out.println(<span class="string">&quot;the Car is running&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String name)</span> &#123;  <span class="comment">// 方法参数不正确</span></span><br><span class="line">    System.out.println(name + <span class="string">&quot;drives the Car is running&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h4 id="将对象存入HashSet，或作为key存入HashMap后，必须确保该对象的hashcode值不变"><a href="#将对象存入HashSet，或作为key存入HashMap后，必须确保该对象的hashcode值不变" class="headerlink" title="将对象存入HashSet，或作为key存入HashMap后，必须确保该对象的hashcode值不变"></a>将对象存入HashSet，或作为key存入HashMap后，必须确保该对象的hashcode值不变</h4><p>Java代码也可能发生<strong>内存泄漏</strong></p>
<blockquote>
<p>对于Hash集合(HashMap，HashSet等)而言，对象的hashcode至关重要，在hash集合内查找该对象完全依赖此值。如果一个对象存入Hash集合后，修改了参与计算hashcode有关的字段，那么修改后的hashcode的值就与最初存储进来的hashcode的值不同了，结果就是无法在集合内找到该对象，进而不能删除该对象，最终导致内存泄漏。</p>
</blockquote>
<p>会发生内存泄漏的例子：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">HashSet&lt;Email&gt; emailSet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line"><span class="type">Email</span> <span class="variable">email</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Email</span>(<span class="string">&quot;fly.com&quot;</span>, <span class="string">&quot;Jim&quot;</span>);</span><br><span class="line">emailSet.add(email);</span><br><span class="line"></span><br><span class="line">email.setAddress(<span class="string">&quot;run.com&quot;</span>);  <span class="comment">// 导致hashcode发生变化</span></span><br><span class="line">System.out.println(emailSet.contains(email));  <span class="comment">// false</span></span><br><span class="line">emailSet.remove(email);  <span class="comment">// 无法移除，发生内存泄漏</span></span><br><span class="line"><span class="keyword">for</span> (Email setEmail : emailSet) &#123;</span><br><span class="line">    System.out.println(setEmail.getAddress());</span><br><span class="line">    System.out.println(setEmail.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="向下类型转换前用instance-of-进行判断"><a href="#向下类型转换前用instance-of-进行判断" class="headerlink" title="向下类型转换前用instance of 进行判断"></a>向下类型转换前用instance of 进行判断</h4><p>目的：避免类型转换的安全性问题</p>
<p>例程：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (animal <span class="keyword">instanceof</span> Tiger) &#123;</span><br><span class="line">    <span class="type">Tiger</span> <span class="variable">tiger</span> <span class="operator">=</span> (Tiger) animal;</span><br><span class="line">    tiger.eat();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;动物对象不能转换成老虎对象！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用集合的toArray-方法将集合转为数组"><a href="#使用集合的toArray-方法将集合转为数组" class="headerlink" title="使用集合的toArray()方法将集合转为数组"></a>使用集合的toArray()方法将集合转为数组</h4><ul>
<li><code>Object[]</code>不可以转化为<code>String[]</code>，需要进行<strong>每个元素的单独转换</strong></li>
</ul>
<p>这样太麻烦了，推荐更简便的方法（带参数的<code>toArray</code>方法）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">array3</span> <span class="operator">=</span> nameList3.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[nameList3.size()]);</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>编程语言</tag>
      </tags>
  </entry>
</search>
